{
  "version": 3,
  "sources": ["../../src/utils/debug.js", "../../src/utils/reactMount.js", "../../src/components/ExerciseSearchDropdown.js", "../../src/components/ManualActivityTracker.js", "../../src/blocks/manual-activity-tracker/view.js"],
  "sourcesContent": ["// Debug utilities for TVS app\nexport const DEBUG =\n  new URLSearchParams(location.search).get(\"tvsdebug\") === \"1\" ||\n  window.TVS_DEBUG === true ||\n  localStorage.getItem(\"tvsDev\") === \"1\";\n\nexport function log(...args) {\n  if (DEBUG) console.debug(\"[TVS]\", ...args);\n}\n\nexport function err(...args) {\n  console.error(\"[TVS]\", ...args);\n}\n", "// React mount helper paired to the active renderer\nimport { log, err } from './debug.js';\n\nconst hasWindowReact = !!(window.React && window.ReactDOM);\nconst hasWpElement = !!(window.wp && window.wp.element);\nconst wpEl = hasWpElement ? window.wp.element : {};\nconst React = hasWindowReact ? window.React : (wpEl || {});\nconst ReactDOM = hasWindowReact ? window.ReactDOM : (wpEl || null);\n\n// Track mounted roots to safely unmount/re-mount\nconst tvsRoots = new WeakMap();\nconst hasCreateRoot =\n  (ReactDOM && typeof ReactDOM.createRoot === 'function') ||\n  (wpEl && typeof wpEl.createRoot === 'function');\n\nexport function mountReact(Component, props, node) {\n  try {\n    const existingRoot = tvsRoots.get(node);\n    if (existingRoot && typeof existingRoot.unmount === 'function') {\n      existingRoot.unmount();\n      tvsRoots.delete(node);\n    } else if (ReactDOM && typeof ReactDOM.unmountComponentAtNode === 'function') {\n      ReactDOM.unmountComponentAtNode(node);\n    }\n\n    if (hasCreateRoot) {\n      const createRoot = (ReactDOM && ReactDOM.createRoot) || (wpEl && wpEl.createRoot);\n      const root = createRoot(node);\n      tvsRoots.set(node, root);\n      root.render(React.createElement(Component, props));\n      return;\n    }\n\n    const legacyRender = (ReactDOM && ReactDOM.render) || (wpEl && wpEl.render);\n    if (legacyRender) {\n      legacyRender(React.createElement(Component, props), node);\n      return;\n    }\n    err('Ingen render-funksjon tilgjengelig.');\n  } catch (e) {\n    err('Mount feilet:', e);\n  }\n}\n\nexport { React, ReactDOM, wpEl };\n", "/**\n * ExerciseSearchDropdown Component\n *\n * Autocomplete dropdown for exercise library search.\n * Features:\n * - Debounced search (300ms)\n * - Min 2 characters required\n * - Keyboard navigation (arrow keys, enter, escape)\n * - Shows category and difficulty badges\n * - Click outside to close\n * - Loading states\n *\n * @package TVS_Virtual_Sports\n * @since 1.3.0\n */\n\nimport { React } from '../utils/reactMount.js';\n\nconst { useState, useEffect, useRef } = React;\n\n/**\n * Debounce utility\n */\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n/**\n * ExerciseSearchDropdown Component\n *\n * @param {Object} props\n * @param {string} props.value - Current input value\n * @param {Function} props.onChange - Input change handler (value)\n * @param {Function} props.onSelect - Exercise selection handler ({id, name, default_metric})\n * @param {string} props.placeholder - Input placeholder\n * @param {string} props.className - Additional CSS class\n */\nfunction ExerciseSearchDropdown({ value, onChange, onSelect, placeholder = 'Search exercises...', className = '' }) {\n  const [results, setResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [error, setError] = useState('');\n\n  const inputRef = useRef(null);\n  const dropdownRef = useRef(null);\n\n  const debouncedSearchTerm = useDebounce(value, 300);\n\n  // Search exercises when debounced term changes\n  useEffect(() => {\n    const searchExercises = async () => {\n      if (debouncedSearchTerm.length < 2) {\n        setResults([]);\n        setShowDropdown(false);\n        setError('');\n        return;\n      }\n\n      setIsSearching(true);\n      setError('');\n\n      try {\n        const url = `${window.TVS_SETTINGS.restRoot}tvs/v1/exercises/search?q=${encodeURIComponent(debouncedSearchTerm)}&limit=10`;\n        \n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-WP-Nonce': window.TVS_SETTINGS.nonce,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Search failed: ${response.status}`);\n        }\n\n        const data = await response.json();\n        setResults(data.results || []); // API returns 'results' not 'exercises'\n        setShowDropdown(true);\n        setSelectedIndex(-1);\n      } catch (err) {\n        console.error('Exercise search error:', err);\n        setError('Search failed. Try again.');\n        setResults([]);\n        setShowDropdown(false);\n      } finally {\n        setIsSearching(false);\n      }\n    };\n\n    searchExercises();\n  }, [debouncedSearchTerm]);\n\n  // Click outside to close dropdown\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target) &&\n        inputRef.current &&\n        !inputRef.current.contains(event.target)\n      ) {\n        setShowDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Keyboard navigation\n  const handleKeyDown = (e) => {\n    if (!showDropdown || results.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex((prev) => (prev < results.length - 1 ? prev + 1 : prev));\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex((prev) => (prev > 0 ? prev - 1 : -1));\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex >= 0 && selectedIndex < results.length) {\n          handleSelect(results[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        setShowDropdown(false);\n        setSelectedIndex(-1);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // Handle exercise selection\n  const handleSelect = (exercise) => {\n    console.log('Exercise selected:', exercise);\n    onSelect({\n      id: exercise.id,\n      name: exercise.name,\n      default_metric: exercise.default_metric || 'reps',\n    });\n    setResults([]);\n    setShowDropdown(false);\n    setSelectedIndex(-1);\n    // Note: Don't clear input here - let parent component handle it\n  };\n\n  // Difficulty badge color\n  const getDifficultyColor = (difficulty) => {\n    switch (difficulty) {\n      case 'beginner':\n        return '#10b981'; // green\n      case 'intermediate':\n        return '#f59e0b'; // orange\n      case 'advanced':\n        return '#ef4444'; // red\n      default:\n        return '#6b7280'; // gray\n    }\n  };\n\n  return React.createElement(\n    'div',\n    { className: `tvs-exercise-search-container ${className}` },\n    React.createElement('input', {\n      ref: inputRef,\n      type: 'text',\n      placeholder,\n      value,\n      onChange: (e) => onChange(e.target.value),\n      onKeyDown: handleKeyDown,\n      onFocus: () => {\n        if (results.length > 0) setShowDropdown(true);\n      },\n      className: 'tvs-exercise-input tvs-input-name',\n      autoComplete: 'off',\n    }),\n    isSearching && React.createElement(\n      'div',\n      { className: 'tvs-search-spinner' },\n      '\uD83D\uDD0D'\n    ),\n    error && React.createElement(\n      'div',\n      { className: 'tvs-search-error' },\n      error\n    ),\n    showDropdown && results.length > 0 && React.createElement(\n      'div',\n      {\n        ref: dropdownRef,\n        className: 'tvs-exercise-dropdown',\n      },\n      results.map((exercise, idx) =>\n        React.createElement(\n          'div',\n          {\n            key: exercise.id,\n            className: `tvs-exercise-result ${idx === selectedIndex ? 'tvs-exercise-result-selected' : ''}`,\n            onClick: () => handleSelect(exercise),\n            onMouseEnter: () => setSelectedIndex(idx),\n          },\n          React.createElement(\n            'div',\n            null,\n            React.createElement(\n              'div',\n              null,\n              React.createElement(\n                'div',\n                null,\n                exercise.name\n              ),\n              React.createElement(\n                'div',\n                null,\n                exercise.category && React.createElement(\n                  'span',\n                  {\n                    className: 'tvs-badge tvs-badge-category',\n                  },\n                  exercise.category\n                ),\n                exercise.difficulty && React.createElement(\n                  'span',\n                  {\n                    className: 'tvs-badge tvs-badge-difficulty',\n                    style: {\n                      background: getDifficultyColor(exercise.difficulty),\n                    },\n                  },\n                  exercise.difficulty\n                ),\n                exercise.default_metric && React.createElement(\n                  'span',\n                  {\n                    className: 'tvs-badge-metric',\n                  },\n                  exercise.default_metric === 'reps' ? '\uD83D\uDD22 Reps' : '\u23F1 Time'\n                )\n              )\n            )\n          )\n        )\n      ),\n      results.length === 0 && !isSearching && debouncedSearchTerm.length >= 2 && React.createElement(\n        'div',\n        { style: { padding: '12px 16px', color: 'var(--tvs-text-secondary)', fontSize: '14px' } },\n        'No exercises found'\n      )\n    ),\n    showDropdown && results.length === 0 && debouncedSearchTerm.length < 2 && React.createElement(\n      'div',\n      {\n        ref: dropdownRef,\n        className: 'tvs-exercise-dropdown-hint',\n        style: {\n          position: 'absolute',\n          top: '100%',\n          left: 0,\n          right: 0,\n          marginTop: '4px',\n          padding: '8px 12px',\n          background: 'var(--tvs-bg-secondary)',\n          border: '1px solid var(--tvs-border)',\n          borderRadius: 'var(--tvs-radius)',\n          fontSize: '12px',\n          color: 'var(--tvs-text-secondary)',\n          zIndex: 1000,\n        },\n      },\n      'Type at least 2 characters to search'\n    )\n  );\n}\n\n// Export as default for import in ManualActivityTracker\nexport default ExerciseSearchDropdown;\n", "import { DEBUG, log } from '../utils/debug.js';\nimport ExerciseSearchDropdown from './ExerciseSearchDropdown.js';\n\nconst { useState, useEffect, useRef } = window.React;\n\n/**\n * Helper to make authenticated API requests\n */\nasync function apiFetch(url, options = {}) {\n  const fullUrl = url.startsWith('/wp-json') ? url : `/wp-json${url}`;\n  const response = await fetch(fullUrl, {\n    ...options,\n    headers: {\n      'Content-Type': 'application/json',\n      'X-WP-Nonce': window.TVS_SETTINGS?.nonce || '',\n      ...options.headers,\n    },\n    credentials: 'include',\n  });\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * ManualActivityTracker - Main component for Issue #21\n * \n * Allows users to track manual indoor activities (treadmill, stationary bike, etc.)\n * Features:\n * - Activity type selection (Run, Ride, Walk, Hike, Swim, Workout)\n * - Live dashboard with timer and metrics\n * - Speed, incline, cadence, power controls\n * - Auto-save every 30 seconds\n * - Session recovery from localStorage\n * - Pause/Resume/Finish controls\n * - Strava upload option after finish\n */\nexport default function ManualActivityTracker({\n  React,\n  title,\n  showTypeSelector,\n  allowedTypes,\n  autoStart,\n  defaultType,\n}) {\n  const [step, setStep] = useState('select'); // 'select', 'tracking', 'calibration', 'finished'\n  const [mode, setMode] = useState('live'); // 'live' or 'retrospective'\n  const [selectedType, setSelectedType] = useState(defaultType);\n  const [calibratedValues, setCalibratedValues] = useState(null); // For storing calibrated values before finish\n  const [sessionId, setSessionId] = useState(null);\n  const [sessionData, setSessionData] = useState(null);\n  const [isPaused, setIsPaused] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [activityId, setActivityId] = useState(null);\n  const [permalink, setPermalink] = useState(null);\n  const [uploadingToStrava, setUploadingToStrava] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [editingField, setEditingField] = useState(null); // Track which field is being edited\n  const [editValue, setEditValue] = useState(''); // Temporary edit value\n  const [editingMainTimer, setEditingMainTimer] = useState(false); // Track if main timer is being edited\n\n  // Metrics state\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const [distance, setDistance] = useState(0);\n  const [speed, setSpeed] = useState(0);\n  const [pace, setPace] = useState(0);\n  const [incline, setIncline] = useState(0);\n  const [cadence, setCadence] = useState(0);\n  const [power, setPower] = useState(0);\n  const [laps, setLaps] = useState(0);\n  const [poolLength, setPoolLength] = useState(25); // meters\n  const [workoutExercises, setWorkoutExercises] = useState([]); // Array of {name, sets, reps, weight, exercise_id}\n  const [currentExerciseName, setCurrentExerciseName] = useState('');\n  const [currentExerciseId, setCurrentExerciseId] = useState(null); // ID from library (if selected)\n  const [currentSets, setCurrentSets] = useState(3);\n  const [currentReps, setCurrentReps] = useState(10);\n  const [currentWeight, setCurrentWeight] = useState(0);\n  const [currentMetricType, setCurrentMetricType] = useState('reps'); // 'reps' or 'time'\n\n  // Calibration state (for live mode before finishing)\n  const [calibDuration, setCalibDuration] = useState(0);\n  const [calibDistance, setCalibDistance] = useState(0);\n  const [calibIncline, setCalibIncline] = useState(0);\n  const [calibCadence, setCalibCadence] = useState(0);\n  const [calibPower, setCalibPower] = useState(0);\n  const [calibLaps, setCalibLaps] = useState(0);\n\n  const timerRef = useRef(null);\n  const autoSaveRef = useRef(null);\n  const startTimeRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // Auto-scroll to top when step changes\n  useEffect(() => {\n    if (containerRef.current) {\n      containerRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }\n  }, [step]);\n\n  // Auto-calculate distance and pace for Swim activities\n  useEffect(() => {\n    if (selectedType === 'Swim' && laps > 0 && poolLength > 0) {\n      const distanceKm = parseFloat((laps * poolLength / 1000).toFixed(2));\n      setDistance(distanceKm);\n      \n      // Calculate pace (seconds per lap) if we have duration\n      if (elapsedTime > 0 && laps > 0) {\n        const paceValue = Math.round(elapsedTime / laps);\n        setPace(paceValue);\n      }\n    }\n  }, [laps, poolLength, elapsedTime, selectedType]);\n\n  // Auto-start if configured (only in live mode)\n  useEffect(() => {\n    if (autoStart && !showTypeSelector && mode === 'live') {\n      handleStartActivity(defaultType);\n    }\n  }, []);\n\n  // Check for saved session on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('tvs_manual_session');\n    if (saved) {\n      try {\n        const data = JSON.parse(saved);\n        if (data.sessionId && data.type) {\n          // Prompt user to recover session\n          if (confirm('You have an unfinished activity. Do you want to continue?')) {\n            setSessionId(data.sessionId);\n            setSelectedType(data.type);\n            setMode(data.mode || 'live');\n            setElapsedTime(data.elapsed_time || 0);\n            setDistance(data.distance || 0);\n            setSpeed(data.speed || 0);\n            setPace(data.pace || 0);\n            setIncline(data.incline || 0);\n            setCadence(data.cadence || 0);\n            setPower(data.power || 0);\n            setStep('tracking');\n            if (mode === 'live') {\n              startTimeRef.current = Date.now() - (data.elapsed_time || 0) * 1000;\n              startTimer();\n            }\n          } else {\n            localStorage.removeItem('tvs_manual_session');\n          }\n        }\n      } catch (e) {\n        if (DEBUG) log('Failed to parse saved session:', e);\n        localStorage.removeItem('tvs_manual_session');\n      }\n    }\n  }, []);\n\n  // Timer logic\n  const startTimer = () => {\n    if (timerRef.current || mode === 'retrospective') return; // Don't start timer in retrospective mode\n    timerRef.current = setInterval(() => {\n      if (startTimeRef.current) {\n        const elapsed = Math.floor((Date.now() - startTimeRef.current) / 1000);\n        setElapsedTime(elapsed);\n        \n        // Auto-calculate distance from speed (only in live mode)\n        if (mode === 'live' && speed > 0) {\n          const distanceKm = (speed * elapsed) / 3600;\n          setDistance(parseFloat(distanceKm.toFixed(2)));\n        }\n      }\n    }, 1000);\n  };\n\n  const stopTimer = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  // Auto-save logic (every 30 seconds)\n  useEffect(() => {\n    if (step === 'tracking' && sessionId && !isPaused) {\n      autoSaveRef.current = setInterval(() => {\n        handleUpdateSession(false); // Silent update, no flash message\n      }, 30000);\n    }\n    return () => {\n      if (autoSaveRef.current) {\n        clearInterval(autoSaveRef.current);\n        autoSaveRef.current = null;\n      }\n    };\n  }, [step, sessionId, isPaused, elapsedTime, distance, speed, pace, incline, cadence, power]);\n\n  // Save to localStorage whenever metrics change\n  useEffect(() => {\n    if (step === 'tracking' && sessionId) {\n      localStorage.setItem('tvs_manual_session', JSON.stringify({\n        sessionId,\n        type: selectedType,\n        mode,\n        elapsed_time: elapsedTime,\n        distance,\n        speed,\n        pace,\n        incline,\n        cadence,\n        power,\n      }));\n    }\n  }, [step, sessionId, elapsedTime, distance, speed, pace, incline, cadence, power]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopTimer();\n      if (autoSaveRef.current) clearInterval(autoSaveRef.current);\n    };\n  }, []);\n\n  // API: Start session\n  const handleStartActivity = async (type) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await apiFetch('/tvs/v1/activities/manual/start', {\n        method: 'POST',\n        body: JSON.stringify({ type }),\n      });\n\n      if (result.success && result.session_id) {\n        setSessionId(result.session_id);\n        setSessionData(result.session_data);\n        setSelectedType(type);\n        setStep('tracking');\n        if (mode === 'live') {\n          startTimeRef.current = Date.now();\n          startTimer();\n        }\n        if (typeof window.tvsFlash === 'function') {\n          window.tvsFlash(`${type} activity started!`, 'success');\n        }\n      } else {\n        throw new Error(data.message || 'Failed to start activity');\n      }\n    } catch (err) {\n      setError(err.message);\n      if (typeof window.tvsFlash === 'function') {\n        window.tvsFlash(err.message, 'error');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // API: Update session metrics\n  const handleUpdateSession = async (showMessage = true) => {\n    if (!sessionId) return;\n\n    try {\n      const payload = {\n        elapsed_time: elapsedTime,\n        distance,\n        speed,\n        pace,\n        incline,\n        cadence,\n        power,\n      };\n\n      // Add workout-specific data\n      if (selectedType === 'Workout') {\n        payload.exercises = workoutExercises; // Array of {name, exercise_id, sets, reps, weight, metric_type}\n      }\n\n      // Add swim-specific data\n      if (selectedType === 'Swim') {\n        payload.laps = laps;\n        payload.pool_length = poolLength;\n      }\n\n      const result = await apiFetch(`/tvs/v1/activities/manual/${sessionId}`, {\n        method: 'PATCH',\n        body: JSON.stringify(payload),\n      });\n\n      if (result.success) {\n        setSessionData(result.session_data);\n        if (showMessage && typeof window.tvsFlash === 'function') {\n          window.tvsFlash('\uD83D\uDCBE Progress saved', 'success');\n        }\n      }\n    } catch (err) {\n      if (DEBUG) log('Failed to update session:', err);\n    }\n  };\n\n  // API: Finish activity\n  const handleFinishActivity = async () => {\n    if (!sessionId) return;\n\n    // If we have calibrated values, update session with those first\n    if (calibratedValues) {\n      // Update state with calibrated values\n      if (calibratedValues.duration !== undefined) setElapsedTime(calibratedValues.duration);\n      if (calibratedValues.distance !== undefined) setDistance(calibratedValues.distance);\n      if (calibratedValues.incline !== undefined) setIncline(calibratedValues.incline);\n      if (calibratedValues.cadence !== undefined) setCadence(calibratedValues.cadence);\n      if (calibratedValues.power !== undefined) setPower(calibratedValues.power);\n      if (calibratedValues.laps !== undefined) setLaps(calibratedValues.laps);\n      \n      // Wait a tick for state to update\n      await new Promise(resolve => setTimeout(resolve, 10));\n    }\n\n    // Final update before finishing\n    await handleUpdateSession(false);\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const result = await apiFetch(`/tvs/v1/activities/manual/${sessionId}/finish`, {\n        method: 'POST',\n      });\n\n      if (result.success && result.activity_id) {\n        setActivityId(result.activity_id);\n        setPermalink(result.permalink);\n        setStep('finished');\n        stopTimer();\n        localStorage.removeItem('tvs_manual_session');\n        \n        // Dispatch event to update My Activities block\n        window.dispatchEvent(new CustomEvent('tvs:activity-updated'));\n        \n        if (typeof window.tvsFlash === 'function') {\n          window.tvsFlash('\uD83C\uDF89 Activity saved successfully!', 'success');\n        }\n      } else {\n        throw new Error(data.message || 'Failed to finish activity');\n      }\n    } catch (err) {\n      setError(err.message);\n      if (typeof window.tvsFlash === 'function') {\n        window.tvsFlash(err.message, 'error');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Upload to Strava\n  const uploadToStrava = async () => {\n    if (!activityId) return;\n    try {\n      setUploadingToStrava(true);\n      const response = await fetch(`/wp-json/tvs/v1/activities/${activityId}/strava`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-WP-Nonce': window.TVS_SETTINGS?.nonce || ''\n        },\n        credentials: 'same-origin',\n      });\n      const result = await response.json();\n      if (!response.ok) {\n        throw new Error(result.message || 'Upload failed');\n      }\n      if (typeof window.tvsFlash === 'function') {\n        window.tvsFlash('\uD83D\uDC4D Uploaded to Strava!', 'success');\n      }\n      window.dispatchEvent(new CustomEvent('tvs:activity-updated'));\n    } catch (err) {\n      console.error('Strava upload failed:', err);\n      if (typeof window.tvsFlash === 'function') {\n        window.tvsFlash('Failed to upload to Strava: ' + (err?.message || String(err)), 'error');\n      }\n    } finally {\n      setUploadingToStrava(false);\n    }\n  };\n\n  // Cancel activity (retrospective mode)\n  const handleCancelActivity = () => {\n    setShowCancelModal(true);\n  };\n\n  const handleConfirmCancel = () => {\n    // Clear localStorage\n    localStorage.removeItem('tvsManualActivitySession');\n    \n    // Reset to initial state\n    setSelectedType('');\n    setElapsedTime(0);\n    setDistance(0);\n    setSpeed(0);\n    setIncline(0);\n    setCadence(0);\n    setPower(0);\n    setLaps(0);\n    setPoolLength(25);\n    setWorkoutExercises([]);\n    setCurrentExerciseName('');\n    setCurrentSets(3);\n    setCurrentReps(10);\n    setCurrentWeight(0);\n    setCurrentMetricType('reps');\n    setIsPaused(false);\n    setSessionId(null);\n    setStep('select');\n    setShowCancelModal(false);\n    \n    if (typeof window.tvsFlash === 'function') {\n      window.tvsFlash('Activity cancelled', 'info');\n    }\n  };\n\n  // Pause/Resume\n  const handleTogglePause = () => {\n    if (isPaused) {\n      // Resume\n      startTimeRef.current = Date.now() - elapsedTime * 1000;\n      setIsPaused(false);\n      startTimer();\n      if (typeof window.tvsFlash === 'function') {\n        window.tvsFlash('\u25B6\uFE0F Activity resumed', 'success');\n      }\n    } else {\n      // Pause\n      stopTimer(); // Stop the timer interval\n      setIsPaused(true);\n      if (typeof window.tvsFlash === 'function') {\n        window.tvsFlash('\u23F8 Activity paused', 'info');\n      }\n    }\n  };\n\n  // Format time as HH:MM:SS\n  const formatTime = (seconds) => {\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor((seconds % 3600) / 60);\n    const s = seconds % 60;\n    return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n  };\n\n  // Format pace as MM:SS (no hours, for pace display)\n  const formatTimePace = (seconds) => {\n    const m = Math.floor(seconds / 60);\n    const s = seconds % 60;\n    return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n  };\n\n  // Parse time string (h:mm:ss, mm:ss, or ss) to seconds\n  const parseTimeInput = (input) => {\n    if (!input) return 0;\n    const parts = input.split(':').map(p => parseInt(p, 10) || 0);\n    if (parts.length === 3) {\n      // h:mm:ss\n      return parts[0] * 3600 + parts[1] * 60 + parts[2];\n    } else if (parts.length === 2) {\n      // mm:ss\n      return parts[0] * 60 + parts[1];\n    } else {\n      // just seconds\n      return parts[0];\n    }\n  };\n\n  // Handle inline edit save\n  const handleInlineEdit = (field, value) => {\n    switch (field) {\n      case 'duration':\n        const seconds = parseTimeInput(value);\n        setElapsedTime(Math.max(0, seconds));\n        break;\n      case 'distance':\n        setDistance(Math.max(0, parseFloat(value) || 0));\n        break;\n      case 'speed':\n        setSpeed(Math.max(0, parseFloat(value) || 0));\n        break;\n      case 'incline':\n        setIncline(Math.max(-5, Math.min(15, parseFloat(value) || 0)));\n        break;\n      case 'cadence':\n        setCadence(Math.max(0, parseInt(value, 10) || 0));\n        break;\n      case 'power':\n        setPower(Math.max(0, parseInt(value, 10) || 0));\n        break;\n      case 'laps':\n        setLaps(Math.max(0, parseInt(value, 10) || 0));\n        break;\n    }\n    setEditingField(null);\n    setEditValue('');\n  };\n\n  // Calculate pace from speed\n  useEffect(() => {\n    if (speed > 0) {\n      setPace(parseFloat((60 / speed).toFixed(2)));\n    } else {\n      setPace(0);\n    }\n  }, [speed]);\n\n  // Get metrics configuration based on activity type\n  const getMetricsConfig = () => {\n    const baseConfig = {\n      'Run': { display: ['distance', 'speed', 'pace', 'incline'], controls: ['speed', 'incline', 'cadence'] },\n      'Walk': { display: ['distance', 'speed', 'pace', 'incline'], controls: ['speed', 'incline', 'cadence'] },\n      'Hike': { display: ['distance', 'speed', 'pace', 'incline'], controls: ['speed', 'incline', 'cadence'] },\n      'Ride': { display: ['distance', 'speed', 'incline', 'cadence'], controls: ['speed', 'incline', 'cadence', 'power'] },\n      'Swim': { display: ['laps', 'poolLength', 'distance', 'pace'], controls: ['laps', 'poolLength'] },\n      'Workout': { display: [], controls: [] }\n    };\n\n    const config = baseConfig[selectedType] || { display: ['distance', 'speed', 'pace'], controls: ['speed'] };\n    \n    // In retrospective mode, replace speed controls with distance and duration\n    if (mode === 'retrospective') {\n      if (['Run', 'Walk', 'Hike', 'Ride'].includes(selectedType)) {\n        config.controls = ['distance', 'duration', 'incline', 'cadence'];\n        if (selectedType === 'Ride') config.controls.push('power');\n      } else if (selectedType === 'Swim') {\n        config.controls = ['laps', 'poolLength', 'duration'];\n      } else if (selectedType === 'Workout') {\n        config.controls = ['duration'];\n      }\n    }\n    \n    return config;\n  };\n\n  const metricsConfig = getMetricsConfig();\n\n  // Render metrics based on activity type\n  const renderMetric = (type) => {\n    const metricDefs = {\n      distance: { label: 'Distance (km)', value: distance.toFixed(2) },\n      speed: { label: 'Speed (km/h)', value: speed.toFixed(1) },\n      pace: { label: selectedType === 'Swim' ? 'Pace (sec/lap)' : 'Pace (min/km)', value: pace > 0 ? (selectedType === 'Swim' ? pace : formatTimePace(pace)) : '\u2014' },\n      incline: { label: 'Incline (%)', value: incline.toFixed(1) },\n      cadence: { label: selectedType === 'Run' ? 'Cadence (SPM)' : 'Cadence (RPM)', value: cadence },\n      laps: { label: 'Laps', value: laps },\n      poolLength: { label: 'Pool Length (m)', value: poolLength }\n    };\n    \n    const metric = metricDefs[type];\n    if (!metric) return null;\n    \n    return React.createElement(\n      'div',\n      { className: 'tvs-metric', key: type },\n      React.createElement('label', null, metric.label),\n      React.createElement('div', { className: 'tvs-metric-value' }, metric.value)\n    );\n  };\n\n  // Render control based on activity type\n  const renderControl = (type) => {\n    const controls = {\n      distance: {\n        label: 'Distance (km)',\n        value: distance.toFixed(2),\n        onDecrease: () => setDistance(Math.max(0, parseFloat((distance - 0.1).toFixed(2)))),\n        onIncrease: () => setDistance(parseFloat((distance + 0.1).toFixed(2)))\n      },\n      duration: {\n        label: 'Duration (h:mm:ss)',\n        value: formatTime(elapsedTime),\n        onDecrease: () => setElapsedTime(Math.max(0, elapsedTime - 60)),\n        onIncrease: () => setElapsedTime(elapsedTime + 60)\n      },\n      speed: {\n        label: 'Speed (km/h)',\n        value: speed.toFixed(1),\n        onDecrease: () => setSpeed(Math.max(0, speed - 0.5)),\n        onIncrease: () => setSpeed(speed + 0.5)\n      },\n      incline: {\n        label: 'Incline (%)',\n        value: incline.toFixed(1) + '%',\n        onDecrease: () => setIncline(Math.max(-5, parseFloat((incline - 0.5).toFixed(1)))),\n        onIncrease: () => setIncline(Math.min(15, parseFloat((incline + 0.5).toFixed(1))))\n      },\n      cadence: {\n        label: selectedType === 'Run' ? 'Cadence (SPM)' : 'Cadence (RPM)',\n        value: cadence,\n        onDecrease: () => setCadence(Math.max(0, cadence - 5)),\n        onIncrease: () => setCadence(cadence + 5)\n      },\n      power: {\n        label: 'Power (W)',\n        value: power,\n        onDecrease: () => setPower(Math.max(0, power - 10)),\n        onIncrease: () => setPower(power + 10)\n      },\n      laps: {\n        label: 'Laps',\n        value: laps,\n        onDecrease: () => setLaps(Math.max(0, laps - 1)),\n        onIncrease: () => setLaps(laps + 1)\n      },\n      poolLength: {\n        label: 'Pool Length (m)',\n        value: poolLength,\n        onDecrease: () => setPoolLength(poolLength === 50 ? 25 : 25),\n        onIncrease: () => setPoolLength(poolLength === 25 ? 50 : 50)\n      }\n    };\n    \n    const control = controls[type];\n    if (!control) return null;\n    \n    const isEditing = editingField === type;\n    const canEdit = mode === 'retrospective';\n    \n    return React.createElement(\n      'div',\n      { className: 'tvs-control-row', key: type },\n      React.createElement('label', null, control.label),\n      React.createElement(\n        'div',\n        { className: 'tvs-control-buttons' },\n        (type === 'duration' || type === 'distance') && canEdit && React.createElement(\n          'button', \n          { \n            onClick: type === 'duration' ? () => setElapsedTime(Math.max(0, elapsedTime - 1)) : () => setDistance(Math.max(0, parseFloat((distance - 0.01).toFixed(2)))), \n            className: 'tvs-btn-small' \n          }, \n          type === 'duration' ? '\u22121s' : '\u22120.01'\n        ),\n        React.createElement('button', { onClick: control.onDecrease }, '\u2212'),\n        isEditing ? React.createElement('input', {\n          type: 'text',\n          className: 'tvs-inline-edit',\n          value: editValue,\n          onChange: (e) => setEditValue(e.target.value),\n          onBlur: () => handleInlineEdit(type, editValue),\n          onKeyDown: (e) => {\n            if (e.key === 'Enter') handleInlineEdit(type, editValue);\n            if (e.key === 'Escape') { setEditingField(null); setEditValue(''); }\n          },\n          autoFocus: true,\n          placeholder: type === 'duration' ? 'h:mm:ss' : control.value\n        }) : React.createElement(\n          'span',\n          { \n            onClick: canEdit ? () => {\n              setEditingField(type);\n              setEditValue(\n                type === 'duration' ? formatTime(elapsedTime) :\n                type === 'distance' ? distance.toFixed(2) :\n                type === 'speed' ? speed.toFixed(1) :\n                type === 'incline' ? incline.toFixed(1) :\n                String(control.value)\n              );\n            } : null,\n            className: canEdit ? 'tvs-editable' : '',\n            title: canEdit ? 'Click to edit' : ''\n          }, \n          control.value\n        ),\n        React.createElement('button', { onClick: control.onIncrease }, '+'),\n        (type === 'duration' || type === 'distance') && canEdit && React.createElement(\n          'button', \n          { \n            onClick: type === 'duration' ? () => setElapsedTime(elapsedTime + 1) : () => setDistance(parseFloat((distance + 0.01).toFixed(2))), \n            className: 'tvs-btn-small' \n          }, \n          type === 'duration' ? '+1s' : '+0.01'\n        )\n      )\n    );\n  };\n\n  // Render: Type selection\n  if (step === 'select') {\n    return React.createElement(\n      'div',\n      { className: 'tvs-manual-tracker tvs-card', ref: containerRef },\n      React.createElement('h3', { className: 'tvs-tracker-title' }, title),\n      \n      // Mode selector\n      React.createElement(\n        'div',\n        { className: 'tvs-mode-selector' },\n        React.createElement(\n          'button',\n          {\n            className: `tvs-mode-btn ${mode === 'live' ? 'active' : ''}`,\n            onClick: () => setMode('live')\n          },\n          '\u23F1\uFE0F Track Live',\n          React.createElement('span', { className: 'tvs-mode-desc' }, 'Real-time tracking')\n        ),\n        React.createElement(\n          'button',\n          {\n            className: `tvs-mode-btn ${mode === 'retrospective' ? 'active' : ''}`,\n            onClick: () => setMode('retrospective')\n          },\n          '\uD83D\uDCDD Log Past Activity',\n          React.createElement('span', { className: 'tvs-mode-desc' }, 'Enter completed activity')\n        )\n      ),\n      \n      showTypeSelector && React.createElement(\n        'div',\n        { className: 'tvs-type-selector' },\n        allowedTypes.map((type) =>\n          React.createElement(\n            'button',\n            {\n              key: type,\n              className: `tvs-type-btn ${selectedType === type ? 'active' : ''}`,\n              onClick: () => setSelectedType(type),\n              disabled: isLoading,\n            },\n            getActivityIcon(type),\n            React.createElement('span', null, type)\n          )\n        )\n      ),\n      React.createElement(\n        'button',\n        {\n          className: 'tvs-btn tvs-btn-primary',\n          onClick: () => handleStartActivity(selectedType),\n          disabled: isLoading,\n        },\n        isLoading ? 'Starting...' : `Start ${selectedType}`\n      )\n    );\n  }\n\n  // Render: Tracking dashboard\n  if (step === 'tracking') {\n    return React.createElement(\n      'div',\n      { className: 'tvs-manual-tracker tvs-dashboard tvs-card', ref: containerRef },\n      React.createElement(\n        'div',\n        { className: 'tvs-dashboard-header' },\n        React.createElement(\n          'div',\n          null,\n          React.createElement('h3', { className: 'tvs-tracker-title' }, `${selectedType} Activity`),\n          React.createElement(\n            'span',\n            { className: 'tvs-badge tvs-badge-accent', style: { fontSize: 'var(--tvs-text-xs)', marginTop: 'var(--tvs-space-1)' } },\n            mode === 'retrospective' ? '\uD83D\uDCDD Retrospective' : '\u23F1\uFE0F Live'\n          )\n        ),\n        editingMainTimer ? React.createElement('input', {\n          type: 'text',\n          className: 'tvs-timer-edit',\n          value: editValue,\n          onChange: (e) => setEditValue(e.target.value),\n          onBlur: () => {\n            handleInlineEdit('duration', editValue);\n            setEditingMainTimer(false);\n          },\n          onKeyDown: (e) => {\n            if (e.key === 'Enter') {\n              handleInlineEdit('duration', editValue);\n              setEditingMainTimer(false);\n            }\n            if (e.key === 'Escape') {\n              setEditingMainTimer(false);\n              setEditValue('');\n            }\n          },\n          autoFocus: true,\n          placeholder: 'h:mm:ss'\n        }) : React.createElement(\n          'div',\n          { \n            className: mode === 'retrospective' ? 'tvs-timer tvs-timer-editable' : 'tvs-timer',\n            onClick: mode === 'retrospective' ? () => {\n              setEditingMainTimer(true);\n              setEditValue(formatTime(elapsedTime));\n            } : null,\n            title: mode === 'retrospective' ? 'Click to edit time' : ''\n          },\n          formatTime(elapsedTime)\n        )\n      ),\n      \n      // Metrics display (activity-specific)\n      React.createElement(\n        'div',\n        { className: 'tvs-metrics-grid' },\n        metricsConfig.display.map(renderMetric)\n      ),\n\n      // Controls (activity-specific)\n      React.createElement(\n        'div',\n        { className: 'tvs-controls' },\n        React.createElement('h4', null, 'Adjust Metrics'),\n        mode === 'retrospective' && React.createElement(\n          'p',\n          { className: 'tvs-controls-hint' },\n          '\uD83D\uDCA1 Click on any value to edit directly'\n        ),\n        metricsConfig.controls.map(renderControl)\n      ),\n\n      // Workout Exercises (only for Workout type)\n      selectedType === 'Workout' && React.createElement(\n        'div',\n        { className: 'tvs-workout-exercises' },\n        React.createElement('h4', null, 'Strength Training'),\n        React.createElement(\n          'p',\n          { className: 'tvs-workout-hint' },\n          `Add each exercise with its sets, reps, and weight. Track different loads per exercise.`\n        ),\n        workoutExercises.length > 0 && React.createElement(\n          'div',\n          { className: 'tvs-exercise-list' },\n          workoutExercises.map((exercise, idx) =>\n            React.createElement(\n              'div',\n              { key: idx, className: 'tvs-exercise-item' },\n              React.createElement('span', { className: 'tvs-exercise-number' }, `${idx + 1}.`),\n              React.createElement('span', { className: 'tvs-exercise-name' }, exercise.name),\n              React.createElement('span', { className: 'tvs-exercise-stats' }, \n                `${exercise.sets} \u00D7 ${exercise.reps}${exercise.metric_type === 'time' ? 's' : ''}${exercise.weight > 0 ? ` @ ${exercise.weight}kg` : ''}`\n              ),\n              React.createElement(\n                'button',\n                {\n                  className: 'tvs-btn-icon',\n                  onClick: () => {\n                    setWorkoutExercises(workoutExercises.filter((_, i) => i !== idx));\n                  },\n                  title: 'Remove exercise'\n                },\n                '\u2715'\n              )\n            )\n          )\n        ),\n        React.createElement(\n          'div',\n          { className: 'tvs-add-exercise' },\n          React.createElement(\n            'div',\n            { className: 'tvs-exercise-form-header' },\n            React.createElement('label', { className: 'tvs-form-label tvs-form-label-name' }, 'Exercise Name'),\n            React.createElement('label', { className: 'tvs-form-label tvs-form-label-sets' }, 'Sets'),\n            React.createElement(\n              'div',\n              { className: 'tvs-form-label tvs-form-label-reps tvs-metric-type-toggle' },\n              React.createElement(\n                'button',\n                {\n                  type: 'button',\n                  className: currentMetricType === 'reps' ? 'tvs-toggle-btn tvs-toggle-active' : 'tvs-toggle-btn',\n                  onClick: () => setCurrentMetricType('reps'),\n                  title: 'Repetitions'\n                },\n                '\uD83D\uDD22'\n              ),\n              React.createElement(\n                'button',\n                {\n                  type: 'button',\n                  className: currentMetricType === 'time' ? 'tvs-toggle-btn tvs-toggle-active' : 'tvs-toggle-btn',\n                  onClick: () => setCurrentMetricType('time'),\n                  title: 'Time (seconds)'\n                },\n                '\u23F1'\n              )\n            ),\n            React.createElement('label', { className: 'tvs-form-label tvs-form-label-weight' }, 'Weight (kg)')\n          ),\n          React.createElement(\n            'div',\n            { className: 'tvs-exercise-form-inputs' },\n            React.createElement(ExerciseSearchDropdown, {\n              value: currentExerciseName,\n              onChange: (value) => {\n                setCurrentExerciseName(value);\n                // Clear exercise_id when user types (custom exercise)\n                if (currentExerciseId) {\n                  setCurrentExerciseId(null);\n                }\n              },\n              onSelect: (exercise) => {\n                console.log('ManualActivityTracker: Exercise selected', exercise);\n                setCurrentExerciseName(exercise.name);\n                setCurrentExerciseId(exercise.id);\n                setCurrentMetricType(exercise.default_metric || 'reps');\n                if (exercise.default_metric === 'time') {\n                  setCurrentReps(60); // Default 60 seconds\n                } else {\n                  setCurrentReps(10); // Default 10 reps\n                }\n              },\n              placeholder: 'Search or type exercise name...',\n              className: 'tvs-exercise-search'\n            }),\n            React.createElement('input', {\n              type: 'number',\n              placeholder: '3',\n              value: currentSets,\n              min: '1',\n              onChange: (e) => setCurrentSets(Math.max(1, parseInt(e.target.value) || 1)),\n              className: 'tvs-exercise-number tvs-input-sets'\n            }),\n            React.createElement('input', {\n              type: 'number',\n              placeholder: currentMetricType === 'reps' ? '10' : '60',\n              value: currentReps,\n              min: '1',\n              onChange: (e) => setCurrentReps(Math.max(1, parseInt(e.target.value) || 1)),\n              className: 'tvs-exercise-number tvs-input-reps',\n              title: currentMetricType === 'reps' ? 'Repetitions' : 'Seconds'\n            }),\n            React.createElement('input', {\n              type: 'number',\n              placeholder: '0',\n              value: currentWeight,\n              min: '0',\n              step: '0.5',\n              onChange: (e) => setCurrentWeight(Math.max(0, parseFloat(e.target.value) || 0)),\n              className: 'tvs-exercise-number tvs-input-weight'\n            }),\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-secondary tvs-btn-add-exercise',\n                onClick: () => {\n                  if (currentExerciseName.trim()) {\n                    setWorkoutExercises([...workoutExercises, {\n                      name: currentExerciseName.trim(),\n                      exercise_id: currentExerciseId, // null if custom, ID if from library\n                      sets: currentSets,\n                      reps: currentReps,\n                      weight: currentWeight,\n                      metric_type: currentMetricType\n                    }]);\n                    setCurrentExerciseName('');\n                    setCurrentExerciseId(null);\n                    setCurrentSets(3);\n                    setCurrentReps(10);\n                    setCurrentWeight(0);\n                    setCurrentMetricType('reps');\n                  }\n                },\n                disabled: !currentExerciseName.trim()\n              },\n              '+ Add'\n            )\n          )\n        ),\n        workoutExercises.length > 0 && React.createElement(\n          'div',\n          { className: 'tvs-circuit-summary' },\n          React.createElement('p', null, `\uD83D\uDCCB ${workoutExercises.length} exercises`),\n          React.createElement(\n            'p',\n            null,\n            `\uD83D\uDCAA ${workoutExercises.reduce((sum, ex) => sum + (ex.sets * ex.reps), 0)} total reps`\n          ),\n          (() => {\n            const totalVolume = workoutExercises.reduce((sum, ex) => sum + (ex.sets * ex.reps * ex.weight), 0);\n            return totalVolume > 0 && React.createElement(\n              'p',\n              null,\n              `\uD83C\uDFCB\uFE0F Total volume: ${totalVolume.toFixed(1)} kg`\n            );\n          })()\n        )\n      ),\n\n      // Action buttons\n      React.createElement(\n        'div',\n        { className: 'tvs-action-buttons' },\n        mode === 'live' && React.createElement(\n          'button',\n          {\n            className: 'tvs-btn tvs-btn-secondary',\n            onClick: handleTogglePause,\n            disabled: isLoading,\n          },\n          isPaused ? '\u25B6\uFE0F Resume' : '\u23F8 Pause'\n        ),\n        mode === 'live' && React.createElement(\n          'button',\n          {\n            className: 'tvs-btn tvs-btn-secondary',\n            onClick: handleUpdateSession,\n            disabled: isLoading,\n          },\n          '\uD83D\uDCBE Save Progress'\n        ),\n        React.createElement(\n          'button',\n          {\n            className: 'tvs-btn tvs-btn-danger',\n            onClick: handleCancelActivity,\n            disabled: isLoading,\n          },\n          '\u2715 Cancel'\n        ),\n        React.createElement(\n          'button',\n          {\n            className: 'tvs-btn tvs-btn-finish',\n            onClick: () => {\n              // Guard: Workout must have at least one exercise\n              if (selectedType === 'Workout' && workoutExercises.length === 0) {\n                if (typeof window.tvsFlash === 'function') {\n                  window.tvsFlash('\u26A0\uFE0F Add at least one exercise before finishing', 'error');\n                }\n                return;\n              }\n              \n              if (mode === 'live') {\n                // Go to calibration step for live activities\n                stopTimer();\n                // Initialize calibration values with current state\n                setCalibDuration(elapsedTime);\n                setCalibDistance(distance);\n                setCalibIncline(incline);\n                setCalibCadence(cadence);\n                setCalibPower(power);\n                setCalibLaps(laps);\n                setStep('calibration');\n              } else {\n                // Skip calibration for retrospective (already manually entered)\n                setShowConfirmModal(true);\n              }\n            },\n            disabled: isLoading,\n          },\n          isLoading ? 'Finishing...' : '\u2713 Finish Activity'\n        )\n      ),\n\n      isPaused && React.createElement(\n        'div',\n        { className: 'tvs-paused-notice tvs-badge tvs-badge-primary' },\n        '\u23F8 Activity paused'\n      ),\n\n      // Cancel Confirmation Modal\n      showCancelModal && React.createElement(\n        'div',\n        { className: 'tvs-modal-overlay', onClick: () => setShowCancelModal(false) },\n        React.createElement(\n          'div',\n          { \n            className: 'tvs-modal tvs-card',\n            onClick: (e) => e.stopPropagation()\n          },\n          React.createElement('h3', { className: 'tvs-modal-title' }, '\u26A0\uFE0F Cancel Activity?'),\n          React.createElement(\n            'p',\n            { className: 'tvs-modal-text' },\n            'Are you sure you want to cancel this activity? All data will be lost and cannot be recovered.'\n          ),\n          React.createElement(\n            'div',\n            { className: 'tvs-modal-actions' },\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-secondary',\n                onClick: () => setShowCancelModal(false)\n              },\n              'Keep Activity'\n            ),\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-danger',\n                onClick: handleConfirmCancel\n              },\n              '\u2715 Cancel Activity'\n            )\n          )\n        )\n      ),\n\n      // Finish Confirmation Modal\n      showConfirmModal && React.createElement(\n        'div',\n        { className: 'tvs-modal-overlay', onClick: () => setShowConfirmModal(false) },\n        React.createElement(\n          'div',\n          { \n            className: 'tvs-modal tvs-card',\n            onClick: (e) => e.stopPropagation()\n          },\n          React.createElement('h3', { className: 'tvs-modal-title' }, '\uD83C\uDFC1 Finish Activity?'),\n          React.createElement(\n            'p',\n            { className: 'tvs-modal-text' },\n            `Are you sure you want to finish this ${selectedType.toLowerCase()} activity?`\n          ),\n          React.createElement(\n            'div',\n            { className: 'tvs-modal-summary' },\n            React.createElement('div', null, `\u23F1 Duration: ${formatTime(elapsedTime)}`),\n            selectedType !== 'Workout' && React.createElement('div', null, `\uD83D\uDCCD Distance: ${distance.toFixed(2)} km`),\n            selectedType === 'Swim' && React.createElement('div', null, `\uD83C\uDFCA Laps: ${laps}`),\n            selectedType === 'Swim' && pace > 0 && React.createElement('div', null, `\u26A1 Pace: ${pace} sec/lap`),\n            selectedType === 'Workout' && React.createElement('div', null, `\uD83D\uDCAA Sets: ${sets} \u00D7 ${reps} reps`)\n          ),\n          React.createElement(\n            'div',\n            { className: 'tvs-modal-actions' },\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-secondary',\n                onClick: () => setShowConfirmModal(false)\n              },\n              'Go Back'\n            ),\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-finish',\n                onClick: () => {\n                  setShowConfirmModal(false);\n                  handleFinishActivity();\n                },\n                disabled: isLoading\n              },\n              '\u2713 Finish'\n            )\n          )\n        )\n      )\n    );\n  }\n\n  // Render: Calibration (for live mode before finishing)\n  if (step === 'calibration') {\n    const handleCalibrationSave = () => {\n      setCalibratedValues({\n        duration: calibDuration,\n        distance: calibDistance,\n        incline: calibIncline,\n        cadence: calibCadence,\n        power: calibPower,\n        laps: calibLaps,\n      });\n      setShowConfirmModal(true);\n    };\n\n    const handleBackToTracking = () => {\n      setStep('tracking');\n      if (mode === 'live') {\n        startTimer(); // Resume timer\n      }\n    };\n\n    const renderCalibrationField = (label, value, setter, unit = '', step = 0.01, type = 'number') => {\n      return React.createElement(\n        'div',\n        { className: 'tvs-calibration-field' },\n        React.createElement('label', null, label),\n        React.createElement(\n          'div',\n          { className: 'tvs-calibration-input-group' },\n          React.createElement('input', {\n            type: type,\n            value: type === 'text' ? formatTime(value) : value,\n            onChange: (e) => {\n              if (type === 'text') {\n                const seconds = parseTimeInput(e.target.value);\n                setter(seconds);\n              } else {\n                setter(parseFloat(e.target.value) || 0);\n              }\n            },\n            step: step,\n            min: 0,\n            className: 'tvs-calibration-input',\n            placeholder: label\n          }),\n          unit && React.createElement('span', { className: 'tvs-calibration-unit' }, unit)\n        )\n      );\n    };\n\n    return React.createElement(\n      'div',\n      { className: 'tvs-manual-tracker tvs-calibration', ref: containerRef },\n      React.createElement('h3', null, '\uD83C\uDFAF Calibrate Your Results'),\n      React.createElement(\n        'p',\n        { className: 'tvs-calibration-hint' },\n        'Adjust values to match your equipment (treadmill, bike computer, watch, etc.)'\n      ),\n      React.createElement(\n        'div',\n        { className: 'tvs-calibration-grid' },\n        renderCalibrationField('Duration', calibDuration, setCalibDuration, '', 1, 'text'),\n        ['Run', 'Walk', 'Hike', 'Ride'].includes(selectedType) && renderCalibrationField('Distance', calibDistance, setCalibDistance, 'km', 0.01),\n        ['Run', 'Walk', 'Hike', 'Ride'].includes(selectedType) && renderCalibrationField('Incline', calibIncline, setCalibIncline, '%', 0.5),\n        ['Run', 'Walk', 'Hike', 'Ride'].includes(selectedType) && renderCalibrationField('Cadence', calibCadence, setCalibCadence, 'spm', 1),\n        selectedType === 'Ride' && renderCalibrationField('Power', calibPower, setCalibPower, 'W', 1),\n        selectedType === 'Swim' && renderCalibrationField('Laps', calibLaps, setCalibLaps, '', 1)\n      ),\n      React.createElement(\n        'div',\n        { className: 'tvs-calibration-actions' },\n        React.createElement(\n          'button',\n          {\n            className: 'tvs-btn tvs-btn-secondary',\n            onClick: handleBackToTracking\n          },\n          '\u2190 Back to Tracking'\n        ),\n        React.createElement(\n          'button',\n          {\n            className: 'tvs-btn tvs-btn-finish',\n            onClick: handleCalibrationSave\n          },\n          '\u2713 Confirm & Finish'\n        )\n      ),\n\n      // Finish Confirmation Modal (from calibration)\n      showConfirmModal && React.createElement(\n        'div',\n        { className: 'tvs-modal-overlay', onClick: () => setShowConfirmModal(false) },\n        React.createElement(\n          'div',\n          { \n            className: 'tvs-modal tvs-card',\n            onClick: (e) => e.stopPropagation()\n          },\n          React.createElement('h3', { className: 'tvs-modal-title' }, '\uD83C\uDFC1 Finish Activity?'),\n          React.createElement(\n            'p',\n            { className: 'tvs-modal-text' },\n            `Are you sure you want to finish this ${selectedType.toLowerCase()} activity with the calibrated values?`\n          ),\n          React.createElement(\n            'div',\n            { className: 'tvs-modal-summary' },\n            React.createElement('div', null, `\u23F1 Duration: ${formatTime(calibDuration)}`),\n            selectedType !== 'Workout' && React.createElement('div', null, `\uD83D\uDCCD Distance: ${calibDistance.toFixed(2)} km`),\n            selectedType === 'Swim' && React.createElement('div', null, `\uD83C\uDFCA Laps: ${calibLaps}`),\n            selectedType === 'Swim' && calibLaps > 0 && calibDuration > 0 && React.createElement('div', null, `\u26A1 Pace: ${Math.round(calibDuration / calibLaps)} sec/lap`),\n            selectedType === 'Workout' && workoutExercises.length > 0 && React.createElement('div', null, `\uD83C\uDFCB\uFE0F Exercises: ${workoutExercises.length}`)\n          ),\n          React.createElement(\n            'div',\n            { className: 'tvs-modal-actions' },\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-secondary',\n                onClick: () => setShowConfirmModal(false)\n              },\n              'Go Back'\n            ),\n            React.createElement(\n              'button',\n              {\n                className: 'tvs-btn tvs-btn-finish',\n                onClick: () => {\n                  setShowConfirmModal(false);\n                  handleFinishActivity();\n                },\n                disabled: isLoading\n              },\n              '\u2713 Finish'\n            )\n          )\n        )\n      )\n    );\n  }\n\n  // Render: Finished\n  if (step === 'finished') {\n    // Build activity-specific summary\n    const summaryItems = [\n      React.createElement('p', { key: 'type' }, `Type: ${selectedType}`),\n      React.createElement('p', { key: 'duration' }, `\u23F1 Duration: ${formatTime(elapsedTime)}`)\n    ];\n\n    // Add activity-specific metrics\n    if (selectedType === 'Workout') {\n      const totalReps = workoutExercises.reduce((sum, ex) => sum + (ex.sets * ex.reps), 0);\n      const totalVolume = workoutExercises.reduce((sum, ex) => sum + (ex.sets * ex.reps * ex.weight), 0);\n      \n      summaryItems.push(\n        React.createElement('p', { key: 'exercises' }, `\uD83C\uDFCB\uFE0F Exercises: ${workoutExercises.length}`)\n      );\n      \n      if (totalReps > 0) {\n        summaryItems.push(\n          React.createElement('p', { key: 'total' }, `\uD83D\uDD01 Total reps: ${totalReps}`)\n        );\n      }\n      \n      if (totalVolume > 0) {\n        summaryItems.push(\n          React.createElement('p', { key: 'volume' }, `\uD83D\uDCCA Total volume: ${totalVolume.toFixed(1)} kg`)\n        );\n      }\n      \n      // List all exercises\n      if (workoutExercises.length > 0) {\n        summaryItems.push(\n          React.createElement(\n            'div',\n            { key: 'exercise-list', className: 'tvs-summary-exercises' },\n            React.createElement('h4', null, 'Exercises:'),\n            workoutExercises.map((exercise, idx) =>\n              React.createElement(\n                'div',\n                { key: idx, className: 'tvs-summary-exercise' },\n                `${idx + 1}. ${exercise.name} (${exercise.sets} \u00D7 ${exercise.reps}${exercise.metric_type === 'time' ? 's' : ''}${exercise.weight > 0 ? ` @ ${exercise.weight}kg` : ''})`\n              )\n            )\n          )\n        );\n      }\n    } else if (selectedType === 'Swim') {\n      summaryItems.push(\n        React.createElement('p', { key: 'laps' }, `\uD83C\uDFCA Laps: ${laps}`),\n        React.createElement('p', { key: 'pool' }, `\uD83D\uDCCF Pool Length: ${poolLength}m`),\n        React.createElement('p', { key: 'distance' }, `\uD83D\uDCCD Distance: ${(laps * poolLength / 1000).toFixed(2)} km`)\n      );\n      if (pace > 0) {\n        summaryItems.push(\n          React.createElement('p', { key: 'pace' }, `\u26A1 Avg Pace: ${pace} sec/lap`)\n        );\n      }\n    } else {\n      // Run, Walk, Hike, Ride\n      summaryItems.push(\n        React.createElement('p', { key: 'distance' }, `\uD83D\uDCCD Distance: ${distance.toFixed(2)} km`)\n      );\n      if (distance > 0 && elapsedTime > 0) {\n        const avgSpeed = (distance / (elapsedTime / 3600)).toFixed(1);\n        summaryItems.push(\n          React.createElement('p', { key: 'speed' }, `\u26A1 Avg Speed: ${avgSpeed} km/h`)\n        );\n      }\n      if (incline > 0) {\n        summaryItems.push(\n          React.createElement('p', { key: 'incline' }, `\u26F0\uFE0F Incline: ${incline.toFixed(1)}%`)\n        );\n      }\n    }\n\n    return React.createElement(\n      'div',\n      { className: 'tvs-manual-tracker tvs-finished', ref: containerRef },\n      React.createElement('h3', null, '\uD83C\uDF89 Activity Saved!'),\n      React.createElement(\n        'div',\n        { className: 'tvs-summary' },\n        summaryItems\n      ),\n      permalink && React.createElement(\n        'a',\n        { href: permalink, className: 'tvs-btn tvs-btn-primary' },\n        'View Activity'\n      ),\n      activityId && React.createElement(\n        'button',\n        {\n          className: 'tvs-btn tvs-btn-strava',\n          onClick: uploadToStrava,\n          disabled: uploadingToStrava\n        },\n        uploadingToStrava ? 'Uploading...' : '\uD83D\uDEB4 Upload to Strava'\n      ),\n      React.createElement(\n        'button',\n        {\n          className: 'tvs-btn tvs-btn-secondary',\n          onClick: () => {\n            setStep('select');\n            setSessionId(null);\n            setElapsedTime(0);\n            setDistance(0);\n            setSpeed(0);\n            setPace(0);\n            setIncline(0);\n            setCadence(0);\n            setPower(0);\n            setLaps(0);\n            setSets(0);\n            setReps(0);\n          },\n        },\n        'Start Another Activity'\n      )\n    );\n  }\n\n  return null;\n}\n\n// Helper: Get activity icon emoji\nfunction getActivityIcon(type) {\n  const icons = {\n    Run: '\uD83C\uDFC3',\n    Ride: '\uD83D\uDEB4',\n    Walk: '\uD83D\uDEB6',\n    Hike: '\uD83E\uDD7E',\n    Swim: '\uD83C\uDFCA',\n    Workout: '\uD83D\uDCAA',\n  };\n  return icons[type] || '\uD83C\uDFC3';\n}\n", "import { mountReact, React } from '../../utils/reactMount.js';\nimport { DEBUG, log } from '../../utils/debug.js';\nimport ManualActivityTracker from '../../components/ManualActivityTracker.js';\n\nfunction mountAll() {\n  const nodes = document.querySelectorAll('.tvs-manual-activity-tracker');\n  nodes.forEach((node, idx) => {\n    if (!node.__tvsMounted) {\n      const id = node.id || `tvs-manual-tracker-${idx}`;\n      if (!node.id) node.id = id;\n      if (DEBUG) log('Mounting ManualActivityTracker block (view.js) on:', id);\n\n      // Read server-provided attributes from data-*\n      const title = node.getAttribute('data-title') || 'Start Activity';\n      const showTypeSelector = node.getAttribute('data-show-type-selector') === '1';\n      const allowedTypesRaw = node.getAttribute('data-allowed-types') || '[]';\n      const allowedTypes = JSON.parse(allowedTypesRaw);\n      const autoStart = node.getAttribute('data-auto-start') === '1';\n      const defaultType = node.getAttribute('data-default-type') || 'Run';\n\n      mountReact(\n        ManualActivityTracker,\n        {\n          React,\n          title,\n          showTypeSelector,\n          allowedTypes,\n          autoStart,\n          defaultType,\n        },\n        node\n      );\n      node.__tvsMounted = true;\n    }\n  });\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', mountAll);\n} else {\n  mountAll();\n}\n"],
  "mappings": "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",
  "names": ["DEBUG", "log", "args", "err", "hasWindowReact", "hasWpElement", "wpEl", "React", "ReactDOM", "tvsRoots", "hasCreateRoot", "mountReact", "Component", "props", "node", "existingRoot", "root", "legacyRender", "err", "e", "useState", "useEffect", "useRef", "React", "useDebounce", "value", "delay", "debouncedValue", "setDebouncedValue", "handler", "ExerciseSearchDropdown", "onChange", "onSelect", "placeholder", "className", "results", "setResults", "isSearching", "setIsSearching", "showDropdown", "setShowDropdown", "selectedIndex", "setSelectedIndex", "error", "setError", "inputRef", "dropdownRef", "debouncedSearchTerm", "url", "response", "data", "err", "handleClickOutside", "event", "handleKeyDown", "e", "prev", "handleSelect", "exercise", "getDifficultyColor", "difficulty", "idx", "ExerciseSearchDropdown_default", "useState", "useEffect", "useRef", "apiFetch", "url", "options", "fullUrl", "response", "errorData", "ManualActivityTracker", "React", "title", "showTypeSelector", "allowedTypes", "autoStart", "defaultType", "step", "setStep", "mode", "setMode", "selectedType", "setSelectedType", "calibratedValues", "setCalibratedValues", "sessionId", "setSessionId", "sessionData", "setSessionData", "isPaused", "setIsPaused", "isLoading", "setIsLoading", "error", "setError", "activityId", "setActivityId", "permalink", "setPermalink", "uploadingToStrava", "setUploadingToStrava", "showConfirmModal", "setShowConfirmModal", "showCancelModal", "setShowCancelModal", "editingField", "setEditingField", "editValue", "setEditValue", "editingMainTimer", "setEditingMainTimer", "elapsedTime", "setElapsedTime", "distance", "setDistance", "speed", "setSpeed", "pace", "setPace", "incline", "setIncline", "cadence", "setCadence", "power", "setPower", "laps", "setLaps", "poolLength", "setPoolLength", "workoutExercises", "setWorkoutExercises", "currentExerciseName", "setCurrentExerciseName", "currentExerciseId", "setCurrentExerciseId", "currentSets", "setCurrentSets", "currentReps", "setCurrentReps", "currentWeight", "setCurrentWeight", "currentMetricType", "setCurrentMetricType", "calibDuration", "setCalibDuration", "calibDistance", "setCalibDistance", "calibIncline", "setCalibIncline", "calibCadence", "setCalibCadence", "calibPower", "setCalibPower", "calibLaps", "setCalibLaps", "timerRef", "autoSaveRef", "startTimeRef", "containerRef", "distanceKm", "paceValue", "handleStartActivity", "saved", "data", "startTimer", "e", "DEBUG", "log", "elapsed", "stopTimer", "handleUpdateSession", "type", "result", "err", "showMessage", "payload", "handleFinishActivity", "resolve", "uploadToStrava", "handleCancelActivity", "handleConfirmCancel", "handleTogglePause", "formatTime", "seconds", "h", "m", "s", "formatTimePace", "parseTimeInput", "input", "parts", "p", "handleInlineEdit", "field", "value", "metricsConfig", "config", "renderMetric", "metric", "renderControl", "control", "isEditing", "canEdit", "getActivityIcon", "exercise", "idx", "_", "i", "ExerciseSearchDropdown_default", "sum", "ex", "totalVolume", "handleCalibrationSave", "handleBackToTracking", "renderCalibrationField", "label", "setter", "unit", "summaryItems", "totalReps", "avgSpeed", "mountAll", "node", "idx", "id", "DEBUG", "log", "title", "showTypeSelector", "allowedTypesRaw", "allowedTypes", "autoStart", "defaultType", "mountReact", "ManualActivityTracker", "React"]
}
