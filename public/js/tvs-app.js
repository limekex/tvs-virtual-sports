(()=>{var f2=Object.create;var z1=Object.defineProperty;var w2=Object.getOwnPropertyDescriptor;var R2=Object.getOwnPropertyNames;var B2=Object.getPrototypeOf,F2=Object.prototype.hasOwnProperty;var q1=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var m2=(t,r,e,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let H of R2(r))!F2.call(t,H)&&H!==e&&z1(t,H,{get:()=>r[H],enumerable:!(a=w2(r,H))||a.enumerable});return t};var $1=(t,r,e)=>(e=t!=null?f2(B2(t)):{},m2(r||!t||!t.__esModule?z1(e,"default",{value:t,enumerable:!0}):e,t));var V2=q1(o=>{"use strict";var Z1=Symbol.for("react.element"),b2=Symbol.for("react.portal"),k2=Symbol.for("react.fragment"),P2=Symbol.for("react.strict_mode"),D2=Symbol.for("react.profiler"),T2=Symbol.for("react.provider"),E2=Symbol.for("react.context"),U2=Symbol.for("react.forward_ref"),A2=Symbol.for("react.suspense"),N2=Symbol.for("react.memo"),I2=Symbol.for("react.lazy"),Y1=Symbol.iterator;function _2(t){return t===null||typeof t!="object"?null:(t=Y1&&t[Y1]||t["@@iterator"],typeof t=="function"?t:null)}var t2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C2=Object.assign,r2={};function L1(t,r,e){this.props=t,this.context=r,this.refs=r2,this.updater=e||t2}L1.prototype.isReactComponent={};L1.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};L1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a2(){}a2.prototype=L1.prototype;function b1(t,r,e){this.props=t,this.context=r,this.refs=r2,this.updater=e||t2}var k1=b1.prototype=new a2;k1.constructor=b1;C2(k1,L1.prototype);k1.isPureReactComponent=!0;var X1=Array.isArray,i2=Object.prototype.hasOwnProperty,P1={current:null},e2={key:!0,ref:!0,__self:!0,__source:!0};function H2(t,r,e){var a,H={},C=null,L=null;if(r!=null)for(a in r.ref!==void 0&&(L=r.ref),r.key!==void 0&&(C=""+r.key),r)i2.call(r,a)&&!e2.hasOwnProperty(a)&&(H[a]=r[a]);var l=arguments.length-2;if(l===1)H.children=e;else if(1<l){for(var n=Array(l),M=0;M<l;M++)n[M]=arguments[M+2];H.children=n}if(t&&t.defaultProps)for(a in l=t.defaultProps,l)H[a]===void 0&&(H[a]=l[a]);return{$$typeof:Z1,type:t,key:C,ref:L,props:H,_owner:P1.current}}function O2(t,r){return{$$typeof:Z1,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function D1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Z1}function G2(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(e){return r[e]})}var J1=/\/+/g;function y1(t,r){return typeof t=="object"&&t!==null&&t.key!=null?G2(""+t.key):r.toString(36)}function v1(t,r,e,a,H){var C=typeof t;(C==="undefined"||C==="boolean")&&(t=null);var L=!1;if(t===null)L=!0;else switch(C){case"string":case"number":L=!0;break;case"object":switch(t.$$typeof){case Z1:case b2:L=!0}}if(L)return L=t,H=H(L),t=a===""?"."+y1(L,0):a,X1(H)?(e="",t!=null&&(e=t.replace(J1,"$&/")+"/"),v1(H,r,e,"",function(M){return M})):H!=null&&(D1(H)&&(H=O2(H,e+(!H.key||L&&L.key===H.key?"":(""+H.key).replace(J1,"$&/")+"/")+t)),r.push(H)),1;if(L=0,a=a===""?".":a+":",X1(t))for(var l=0;l<t.length;l++){C=t[l];var n=a+y1(C,l);L+=v1(C,r,e,n,H)}else if(n=_2(t),typeof n=="function")for(t=n.call(t),l=0;!(C=t.next()).done;)C=C.value,n=a+y1(C,l++),L+=v1(C,r,e,n,H);else if(C==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return L}function h1(t,r,e){if(t==null)return t;var a=[],H=0;return v1(t,a,"","",function(C){return r.call(e,C,H++)}),a}function W2(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(e){(t._status===0||t._status===-1)&&(t._status=1,t._result=e)},function(e){(t._status===0||t._status===-1)&&(t._status=2,t._result=e)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var T={current:null},x1={transition:null},j2={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:x1,ReactCurrentOwner:P1};o.Children={map:h1,forEach:function(t,r,e){h1(t,function(){r.apply(this,arguments)},e)},count:function(t){var r=0;return h1(t,function(){r++}),r},toArray:function(t){return h1(t,function(r){return r})||[]},only:function(t){if(!D1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};o.Component=L1;o.Fragment=k2;o.Profiler=D2;o.PureComponent=b1;o.StrictMode=P2;o.Suspense=A2;o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j2;o.cloneElement=function(t,r,e){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=C2({},t.props),H=t.key,C=t.ref,L=t._owner;if(r!=null){if(r.ref!==void 0&&(C=r.ref,L=P1.current),r.key!==void 0&&(H=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(n in r)i2.call(r,n)&&!e2.hasOwnProperty(n)&&(a[n]=r[n]===void 0&&l!==void 0?l[n]:r[n])}var n=arguments.length-2;if(n===1)a.children=e;else if(1<n){l=Array(n);for(var M=0;M<n;M++)l[M]=arguments[M+2];a.children=l}return{$$typeof:Z1,type:t.type,key:H,ref:C,props:a,_owner:L}};o.createContext=function(t){return t={$$typeof:E2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T2,_context:t},t.Consumer=t};o.createElement=H2;o.createFactory=function(t){var r=H2.bind(null,t);return r.type=t,r};o.createRef=function(){return{current:null}};o.forwardRef=function(t){return{$$typeof:U2,render:t}};o.isValidElement=D1;o.lazy=function(t){return{$$typeof:I2,_payload:{_status:-1,_result:t},_init:W2}};o.memo=function(t,r){return{$$typeof:N2,type:t,compare:r===void 0?null:r}};o.startTransition=function(t){var r=x1.transition;x1.transition={};try{t()}finally{x1.transition=r}};o.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};o.useCallback=function(t,r){return T.current.useCallback(t,r)};o.useContext=function(t){return T.current.useContext(t)};o.useDebugValue=function(){};o.useDeferredValue=function(t){return T.current.useDeferredValue(t)};o.useEffect=function(t,r){return T.current.useEffect(t,r)};o.useId=function(){return T.current.useId()};o.useImperativeHandle=function(t,r,e){return T.current.useImperativeHandle(t,r,e)};o.useInsertionEffect=function(t,r){return T.current.useInsertionEffect(t,r)};o.useLayoutEffect=function(t,r){return T.current.useLayoutEffect(t,r)};o.useMemo=function(t,r){return T.current.useMemo(t,r)};o.useReducer=function(t,r,e){return T.current.useReducer(t,r,e)};o.useRef=function(t){return T.current.useRef(t)};o.useState=function(t){return T.current.useState(t)};o.useSyncExternalStore=function(t,r,e){return T.current.useSyncExternalStore(t,r,e)};o.useTransition=function(){return T.current.useTransition()};o.version="18.2.0"});var T1=q1((a0,L2)=>{"use strict";L2.exports=V2()});var H1=new URLSearchParams(location.search).get("tvsdebug")==="1"||window.TVS_DEBUG===!0||localStorage.getItem("tvsDev")==="1";function s(...t){H1&&console.debug("[TVS]",...t)}function P(...t){console.error("[TVS]",...t)}var K1=!!(window.React&&window.ReactDOM),S2=!!(window.wp&&window.wp.element),J=S2?window.wp.element:{},O=K1?window.React:J||{},Q=K1?window.ReactDOM:J||null,m1=new WeakMap,y2=Q&&typeof Q.createRoot=="function"||J&&typeof J.createRoot=="function";function Q1(t,r,e){try{let a=m1.get(e);if(a&&typeof a.unmount=="function"?(a.unmount(),m1.delete(e)):Q&&typeof Q.unmountComponentAtNode=="function"&&Q.unmountComponentAtNode(e),y2){let L=(Q&&Q.createRoot||J&&J.createRoot)(e);m1.set(e,L),L.render(O.createElement(t,r));return}let H=Q&&Q.render||J&&J.render;if(H){H(O.createElement(t,r),e);return}P("Ingen render-funksjon tilgjengelig.")}catch(a){P("Mount feilet:",a)}}function V1(t){return new Promise(r=>setTimeout(r,t))}async function p1(t,r,e="operation"){let a;try{return await Promise.race([t,new Promise((H,C)=>{a=setTimeout(()=>C(new Error(e+" timed out")),r)})])}finally{clearTimeout(a)}}function S1({React:t,currentTime:r,duration:e}){let a=t.createElement,H=Math.floor(r/60),C=Math.floor(r%60),L=(n,M)=>n+":"+(M<10?"0":"")+M,l=e>0?r/e*100:0;return a("div",{className:"tvs-progress"},a("div",{className:"tvs-progress__bar"},a("div",{className:"tvs-progress__fill",style:{width:Math.min(l,100)+"%"}})),a("div",{className:"tvs-progress__time"},L(H,C)+" / "+L(Math.floor(e/60),Math.floor(e%60))))}var n1=$1(T1());var E1=$1(T1()),U1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},A1=E1.default.createContext&&E1.default.createContext(U1);var t1=function(){return t1=Object.assign||function(t){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var H in r)Object.prototype.hasOwnProperty.call(r,H)&&(t[H]=r[H])}return t},t1.apply(this,arguments)},z2=function(t,r){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,a=Object.getOwnPropertySymbols(t);H<a.length;H++)r.indexOf(a[H])<0&&Object.prototype.propertyIsEnumerable.call(t,a[H])&&(e[a[H]]=t[a[H]]);return e};function n2(t){return t&&t.map(function(r,e){return n1.default.createElement(r.tag,t1({key:e},r.attr),n2(r.child))})}function S(t){return function(r){return n1.default.createElement(q2,t1({attr:t1({},t.attr)},r),n2(t.child))}}function q2(t){var r=function(e){var a=t.attr,H=t.size,C=t.title,L=z2(t,["attr","size","title"]),l=H||e.size||"1em",n;return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),n1.default.createElement("svg",t1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,a,L,{className:n,style:t1(t1({color:t.color||e.color},e.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),C&&n1.default.createElement("title",null,C),t.children)};return A1!==void 0?n1.default.createElement(A1.Consumer,null,function(e){return r(e)}):r(U1)}function o2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.9997 13.1714L16.9495 8.22168L18.3637 9.63589L11.9997 15.9999L5.63574 9.63589L7.04996 8.22168L11.9997 13.1714Z"}}]})(t)}function M2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z"}}]})(t)}function s1(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.5374 19.5674C16.7844 21.0831 14.4993 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 14.1361 21.3302 16.1158 20.1892 17.7406L17 12H20C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C14.1502 20 16.1022 19.1517 17.5398 17.7716L18.5374 19.5674Z"}}]})(t)}function N1(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 19V13H17V19H19V7.82843L16.1716 5H5V19H7ZM4 3H17L21 7V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM9 15V19H15V15H9Z"}}]})(t)}function g2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 22H4C3.44772 22 3 21.5523 3 21V3C3 2.44772 3.44772 2 4 2H20C20.5523 2 21 2.44772 21 3V21C21 21.5523 20.5523 22 20 22ZM19 20V4H5V20H19ZM8 7H16V9H8V7ZM8 11H16V13H8V11ZM8 15H16V17H8V15Z"}}]})(t)}function Z2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 20.8995L16.9497 15.9497C19.6834 13.2161 19.6834 8.78392 16.9497 6.05025C14.2161 3.31658 9.78392 3.31658 7.05025 6.05025C4.31658 8.78392 4.31658 13.2161 7.05025 15.9497L12 20.8995ZM12 23.7279L5.63604 17.364C2.12132 13.8492 2.12132 8.15076 5.63604 4.63604C9.15076 1.12132 14.8492 1.12132 18.364 4.63604C21.8787 8.15076 21.8787 13.8492 18.364 17.364L12 23.7279ZM12 13C13.1046 13 14 12.1046 14 11C14 9.89543 13.1046 9 12 9C10.8954 9 10 9.89543 10 11C10 12.1046 10.8954 13 12 13ZM12 15C9.79086 15 8 13.2091 8 11C8 8.79086 9.79086 7 12 7C14.2091 7 16 8.79086 16 11C16 13.2091 14.2091 15 12 15Z"}}]})(t)}function I1(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.82986 8.78986L7.99998 9.45588V13H5.99998V8.05H6.015L11.2834 6.13247C11.5274 6.03855 11.7922 5.99162 12.0648 6.0008C13.1762 6.02813 14.1522 6.75668 14.4917 7.82036C14.678 8.40431 14.848 8.79836 15.0015 9.0025C15.9138 10.2155 17.3653 11 19 11V13C16.8253 13 14.8823 12.0083 13.5984 10.4526L12.9008 14.4085L15 16.17V23H13V17.1025L10.7307 15.1984L10.003 19.3253L3.10938 18.1098L3.45667 16.1401L8.38071 17.0084L9.82986 8.78986ZM13.5 5.5C12.3954 5.5 11.5 4.60457 11.5 3.5C11.5 2.39543 12.3954 1.5 13.5 1.5C14.6046 1.5 15.5 2.39543 15.5 3.5C15.5 4.60457 14.6046 5.5 13.5 5.5Z"}}]})(t)}function l2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 7H22V9H16V3H18V7ZM8 9H2V7H6V3H8V9ZM18 17V21H16V15H22V17H18ZM8 15V21H6V17H2V15H8Z"}}]})(t)}function f1(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M8 3V5H4V9H2V3H8ZM2 21V15H4V19H8V21H2ZM22 21H16V19H20V15H22V21ZM22 9H20V5H16V3H22V9Z"}}]})(t)}function c2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM9 9H11V15H9V9ZM13 9H15V15H13V9Z"}}]})(t)}function u2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM10.6219 8.41459L15.5008 11.6672C15.6846 11.7897 15.7343 12.0381 15.6117 12.2219C15.5824 12.2658 15.5447 12.3035 15.5008 12.3328L10.6219 15.5854C10.4381 15.708 10.1897 15.6583 10.0672 15.4745C10.0234 15.4088 10 15.3316 10 15.2526V8.74741C10 8.52649 10.1791 8.34741 10.4 8.34741C10.479 8.34741 10.5562 8.37078 10.6219 8.41459Z"}}]})(t)}function d2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.0003 3C17.3924 3 21.8784 6.87976 22.8189 12C21.8784 17.1202 17.3924 21 12.0003 21C6.60812 21 2.12215 17.1202 1.18164 12C2.12215 6.87976 6.60812 3 12.0003 3ZM12.0003 19C16.2359 19 19.8603 16.052 20.7777 12C19.8603 7.94803 16.2359 5 12.0003 5C7.7646 5 4.14022 7.94803 3.22278 12C4.14022 16.052 7.7646 19 12.0003 19ZM12.0003 16.5C9.51498 16.5 7.50026 14.4853 7.50026 12C7.50026 9.51472 9.51498 7.5 12.0003 7.5C14.4855 7.5 16.5003 9.51472 16.5003 12C16.5003 14.4853 14.4855 16.5 12.0003 16.5ZM12.0003 14.5C13.381 14.5 14.5003 13.3807 14.5003 12C14.5003 10.6193 13.381 9.5 12.0003 9.5C10.6196 9.5 9.50026 10.6193 9.50026 12C9.50026 13.3807 10.6196 14.5 12.0003 14.5Z"}}]})(t)}function p2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.8827 19.2968C16.1814 20.3755 14.1638 21.0002 12.0003 21.0002C6.60812 21.0002 2.12215 17.1204 1.18164 12.0002C1.61832 9.62282 2.81932 7.5129 4.52047 5.93457L1.39366 2.80777L2.80788 1.39355L22.6069 21.1925L21.1927 22.6068L17.8827 19.2968ZM5.9356 7.3497C4.60673 8.56015 3.6378 10.1672 3.22278 12.0002C4.14022 16.0521 7.7646 19.0002 12.0003 19.0002C13.5997 19.0002 15.112 18.5798 16.4243 17.8384L14.396 15.8101C13.7023 16.2472 12.8808 16.5002 12.0003 16.5002C9.51498 16.5002 7.50026 14.4854 7.50026 12.0002C7.50026 11.1196 7.75317 10.2981 8.19031 9.60442L5.9356 7.3497ZM12.9139 14.328L9.67246 11.0866C9.5613 11.3696 9.50026 11.6777 9.50026 12.0002C9.50026 13.3809 10.6196 14.5002 12.0003 14.5002C12.3227 14.5002 12.6309 14.4391 12.9139 14.328ZM20.8068 16.5925L19.376 15.1617C20.0319 14.2268 20.5154 13.1586 20.7777 12.0002C19.8603 7.94818 16.2359 5.00016 12.0003 5.00016C11.1544 5.00016 10.3329 5.11773 9.55249 5.33818L7.97446 3.76015C9.22127 3.26959 10.5793 3.00016 12.0003 3.00016C17.3924 3.00016 21.8784 6.87992 22.8189 12.0002C22.5067 13.6998 21.8038 15.2628 20.8068 16.5925ZM11.7229 7.50857C11.8146 7.50299 11.9071 7.50016 12.0003 7.50016C14.4855 7.50016 16.5003 9.51488 16.5003 12.0002C16.5003 12.0933 16.4974 12.1858 16.4919 12.2775L11.7229 7.50857Z"}}]})(t)}function h2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748ZM10 10V7H12V10H15V12H12V15H10V12H7V10H10Z"}}]})(t)}function v2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748ZM7 10H15V12H7V10Z"}}]})(t)}function x2(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"}}]})(t)}function _1(){let t=O.createElement;return t("div",{className:"tvs-loading",role:"status","aria-live":"polite"},t("svg",{viewBox:"0 0 64 64",className:"tvs-runner","aria-hidden":"true"},t("line",{x1:4,y1:60,x2:60,y2:60,stroke:"#bbb",strokeWidth:2,className:"track"}),t("circle",{cx:26,cy:12,r:5,fill:"none",stroke:"#111",strokeWidth:2}),t("line",{x1:26,y1:17,x2:26,y2:35,stroke:"#111",strokeWidth:2}),t("line",{x1:26,y1:22,x2:40,y2:18,stroke:"#111",strokeWidth:2,className:"arm front",style:{transformOrigin:"26px 22px"}}),t("line",{x1:26,y1:22,x2:12,y2:26,stroke:"#111",strokeWidth:2,className:"arm back",style:{transformOrigin:"26px 22px"}}),t("line",{x1:26,y1:35,x2:40,y2:48,stroke:"#111",strokeWidth:2,className:"leg front",style:{transformOrigin:"26px 35px"}}),t("line",{x1:26,y1:35,x2:16,y2:54,stroke:"#111",strokeWidth:2,className:"leg back",style:{transformOrigin:"26px 35px"}})),t("div",null,t("div",{className:"tvs-skel line"}),t("div",{className:"tvs-skel line sm"}),t("div",null,t("span",{className:"tvs-skel block"}),t("span",{className:"tvs-skel block"}),t("span",{className:"tvs-skel block"}))))}function O1({React:t,routeId:r,lastStatus:e,lastError:a,currentTime:H,duration:C}){let{useEffect:L,useRef:l,useState:n,createElement:M}=t;function F(A){let{useEffect:D,useRef:h,useState:f}=A,[w,v]=f(0),E=h(performance.now()),N=h(0);return D(()=>{let I,m=C1=>{N.current+=1,C1-E.current>=1e3&&(v(N.current),N.current=0,E.current=C1),I=requestAnimationFrame(m)};return I=requestAnimationFrame(m),()=>cancelAnimationFrame(I)},[]),w}let U=F(t),G=l(null),[z,W]=n(!1),[j,q]=n({x:16,y:16});L(()=>{if(!G.current)return;let D,h,f,w,v=!1;function E(m){m.target.closest(".tvs-dev__header")&&(v=!0,D=m.clientX,h=m.clientY,f=j.x,w=j.y,m.preventDefault())}function N(m){v&&q({x:f+(m.clientX-D),y:w+(m.clientY-h)})}function I(){v=!1}return window.addEventListener("mousedown",E),window.addEventListener("mousemove",N),window.addEventListener("mouseup",I),()=>{window.removeEventListener("mousedown",E),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",I)}},[j]);let Y=C>0?(H/C*100).toFixed(1):"0.0",y={env:window.TVS_SETTINGS?.env,version:window.TVS_SETTINGS?.version,restRoot:window.TVS_SETTINGS?.restRoot,user:window.TVS_SETTINGS?.user,routeId:r,lastStatus:e||"idle",lastError:a?String(a):null,currentTime:H?H.toFixed(1):"0.0",duration:C||0,progress:Y+"%",fps:U};function c(A,D,h){return M("div",{className:"tvs-dev__row"},M("span",null,A),M("code",{className:h?"tvs-dev__err":""},D))}function o1(){navigator.clipboard.writeText(JSON.stringify({...y,time:new Date().toISOString()},null,2)).catch(console.error)}return M("div",{ref:G,className:`tvs-dev ${z?"is-min":""}`,style:{left:j.x+"px",top:j.y+"px"}},M("div",{className:"tvs-dev__header"},M("strong",null,"TVS Dev"),M("div",{className:"tvs-dev__spacer"}),M("span",{className:"tvs-dev__pill"},y.env||"n/a"),M("button",{className:"tvs-dev__btn",onClick:()=>W(!z),"aria-label":"Minimize"},"\u2581")),M("div",{className:"tvs-dev__body"},c("Route",y.routeId??"n/a"),c("User",y.user??"guest"),c("REST",y.restRoot??"n/a"),c("Status",y.lastStatus),y.lastError?c("Error",y.lastError,!0):null,c("Duration",y.duration+"s"),c("Current",y.currentTime+"s"),c("Progress",y.progress),c("FPS",String(y.fps)),M("div",{className:"tvs-dev__actions"},M("button",{onClick:o1,className:"tvs-dev__btn"},"Copy debug"),M("button",{onClick:()=>{localStorage.setItem("tvsDev","0"),location.reload()},className:"tvs-dev__btn tvs-dev__btn--ghost"},"Disable"))))}function G1({routeData:t,routeId:r}){let{useEffect:e,useState:a,useRef:H,createElement:C}=O,[L,l]=a(!0),[n,M]=a(12),[F,U]=a(!1),[G,z]=a(!0),[W,j]=a(!0),[q,Y]=a(null),[y,c]=a(0),[o1,A]=a(0),D=H(null),h=H(null),f=H(null),w=H(null),v=H(null),E=H(null),N=H(null),I=[{id:"poi-1",name:"Oslo Sentralstasjon",description:"Norges st\xF8rste jernbanestasjon, \xE5pnet i 1980.",triggerDistanceMeters:150,hideDistanceMeters:100,lng:10.7522,lat:59.9111,icon:"\u{1F682}"},{id:"poi-2",name:"Operaen",description:"Den Norske Opera & Ballett, ikonisk marmorbygg ved fjorden.",triggerDistanceMeters:150,hideDistanceMeters:100,lng:10.7531,lat:59.9075,icon:"\u{1F3AD}"},{id:"poi-3",name:"Akershus Festning",description:"Middelalderborg fra 1299, med fantastisk utsikt over Oslofjorden.",triggerDistanceMeters:150,hideDistanceMeters:100,lng:10.7364,lat:59.9078,icon:"\u{1F3F0}"}],m=t?.meta?.gpx_url||"",C1=t?.title||"Route",$=t?.meta?.distance_km||0,c1=$>0&&n>0?Math.round($/n*60):0;function i1(R,g,d,r1){let K=(d-R)*Math.PI/180,k=(r1-g)*Math.PI/180,i=Math.sin(K/2)*Math.sin(K/2)+Math.cos(R*Math.PI/180)*Math.cos(d*Math.PI/180)*Math.sin(k/2)*Math.sin(k/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function M1(R,g,d,r1){if(!d||d.length===0)return 0;let B=0,K=1/0;d.forEach((i,V)=>{let Z=i1(i.lat,i.lng,g,R);Z<K&&(K=Z,B=V)});let k=0;for(let i=0;i<B&&i<d.length-1;i++)k+=i1(d[i].lat,d[i].lng,d[i+1].lat,d[i+1].lng);return k}e(()=>{if(!(!m||!window.mapboxgl))return(async()=>{try{let g=await(await fetch(`/wp-json/tvs/v1/routes/${r}/gpx-data`)).json();if(!g.points||g.points.length===0){console.error("No GPS points in GPX data");return}window.mapboxgl.accessToken="pk.eyJ1IjoibGltZWtleCIsImEiOiJjbTN4emN4NDUwY2o2MmtzOXRrb2w5YmNxIn0.rJ0YZqV7mDmx5I3rpglXvg";let d=new window.mapboxgl.Map({container:D.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[g.points[0].lng,g.points[0].lat],zoom:14,pitch:60,bearing:0});h.current=d,d.on("load",()=>{let r1=g.points.map(k=>[k.lng,k.lat]);d.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r1}}}),d.addLayer({id:"route-line",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":6,"line-opacity":.7}}),E.current="route-line",d.addSource("completed-route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[g.points[0].lng,g.points[0].lat]]}}}),d.addLayer({id:"completed-route-line",type:"line",source:"completed-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#00ff00","line-width":6,"line-opacity":.95}}),v.current="completed-route-line";let B=document.createElement("div");B.className="virtual-training-marker",B.style.width="20px",B.style.height="20px",B.style.borderRadius="50%",B.style.backgroundColor="#ff0000",B.style.border="3px solid white",B.style.boxShadow="0 0 10px rgba(0,0,0,0.5)";let K=new window.mapboxgl.Marker(B).setLngLat([g.points[0].lng,g.points[0].lat]).addTo(d);if(f.current=K,I.forEach(k=>{let i=document.createElement("div");i.className="poi-marker",i.style.width="40px",i.style.height="40px",i.style.borderRadius="50%",i.style.backgroundColor="#8b5cf6",i.style.border="3px solid white",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.fontSize="20px",i.style.cursor="pointer",i.innerHTML=k.icon,new window.mapboxgl.Marker(i).setLngLat([k.lng,k.lat]).addTo(d)}),window.gsap){let i=g.distance_km/n*3600/g.points.length,V=window.gsap.timeline({paused:!0,onUpdate:()=>{let Z=V.progress(),x=Math.floor(Z*(g.points.length-1)),u=g.points[x];if(u&&f.current){f.current.setLngLat([u.lng,u.lat]),G&&h.current&&h.current.jumpTo({center:[u.lng,u.lat]});let a1=g.points.slice(0,x+1).map(p=>[p.lng,p.lat]);a1.length>0&&h.current&&h.current.getSource("completed-route")?.setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:a1}});let _=0;for(let p=0;p<x&&p<g.points.length-1;p++)_+=i1(g.points[p].lat,g.points[p].lng,g.points[p+1].lat,g.points[p+1].lng);c(_),A(V.time()),I.forEach(p=>{let X=M1(p.lng,p.lat,g.points,x),g1=(p.triggerDistanceMeters||150)/1e3,j1=(p.hideDistanceMeters||100)/1e3;_>=X-g1&&_<=X+j1?q?.id!==p.id&&Y(p):q?.id===p.id&&_>X+j1&&Y(null)})}}});g.points.forEach((Z,x)=>{V.to({},{duration:i,ease:"none"})}),w.current=V}})}catch(R){console.error("Failed to load GPX data:",R)}})(),()=>{h.current&&h.current.remove(),w.current&&w.current.kill()}},[m,r]);function b(){l(!1),U(!0),w.current&&w.current.play()}function e1(){w.current&&(F?w.current.pause():w.current.play(),U(!F))}function w1(){w.current&&(w.current.restart(),U(!0),c(0),A(0),Y(null))}function u1(){h.current&&h.current.zoomIn()}function R1(){h.current&&h.current.zoomOut()}function B1(){if(!h.current||!E.current)return;let R=W?"none":"visible";h.current.setLayoutProperty("route-line","visibility",R),j(!W)}function d1(){let R=document.querySelector(".tvs-virtual-training");R&&R.requestFullscreen&&R.requestFullscreen()}function F1(R){let g=Math.floor(R/60),d=Math.floor(R%60);return`${g}:${d.toString().padStart(2,"0")}`}return L?C("div",{className:"tvs-virtual-training tvs-virtual-training--welcome"},C("div",{className:"virtual-training-welcome"},C("h2",null,C1),C("div",{className:"welcome-stats"},C("div",{className:"stat"},C("span",{className:"stat-label"},"Distance"),C("span",{className:"stat-value"},`${$.toFixed(2)} km`)),C("div",{className:"stat"},C("span",{className:"stat-label"},"Duration"),C("span",{className:"stat-value"},`${c1} min`))),C("div",{className:"speed-input"},C("label",null,"Your Speed (km/h)"),C("input",{type:"number",value:n,onChange:R=>M(Number(R.target.value)||12),min:1,max:50,step:.5})),C("button",{className:"tvs-btn tvs-btn--primary",onClick:b},"Start Training"))):C("div",{className:"tvs-virtual-training"},C("div",{ref:D,className:"virtual-training-map",style:{width:"100%",height:"70vh"}}),C("div",{className:"training-stats"},C("div",{className:"stat-item"},C("span",{className:"stat-label"},"Distance"),C("span",{className:"stat-value"},`${y.toFixed(2)} / ${$.toFixed(2)} km`)),C("div",{className:"stat-item"},C("span",{className:"stat-label"},"Time"),C("span",{className:"stat-value"},`${F1(o1)} / ${F1(c1*60)}`)),C("div",{className:"stat-item"},C("span",{className:"stat-label"},"Speed"),C("span",{className:"stat-value"},`${n} km/h`))),q&&C("div",{className:"poi-popup"},C("div",{className:"poi-icon"},q.icon),C("h3",null,q.name),C("p",null,q.description)),C("div",{className:"training-controls"},C("button",{className:"control-btn",onClick:e1,title:F?"Pause":"Play"},C(F?c2:u2,{size:32})),C("button",{className:"control-btn",onClick:w1,title:"Restart"},C(s1,{size:24})),C("button",{className:"control-btn",onClick:u1,title:"Zoom In"},C(h2,{size:24})),C("button",{className:"control-btn",onClick:R1,title:"Zoom Out"},C(v2,{size:24})),C("button",{className:`control-btn ${G?"active":""}`,onClick:()=>z(!G),title:G?"Disable Follow":"Enable Follow"},C(G?d2:p2,{size:24})),C("button",{className:`control-btn ${W?"active":""}`,onClick:B1,title:W?"Hide Route Line":"Show Route Line"},"Route"),C("button",{className:"control-btn",onClick:d1,title:"Fullscreen"},C(f1,{size:24}))))}var l1=Number(new URLSearchParams(location.search).get("tvsslow")||0);function W1({initialData:t,routeId:r}){let{useEffect:e,useState:a,useRef:H,createElement:C}=O,[L,l]=a(t||null),[n,M]=a(null),[F,U]=a(!1),[G,z]=a(!1),[W,j]=a(null),[q,Y]=a(null),[y,c]=a(t?"inline":"loading"),[o1,A]=a(null),[D,h]=a(0),[f,w]=a(!1),[v,E]=a(!1),[N,I]=a(!0),[m,C1]=a(!0),[$,c1]=a(!0),i1=H(null),M1=H(null);function b(i,V="success"){typeof window.tvsFlash=="function"&&window.tvsFlash(i,V)}e(()=>{let i=new URLSearchParams(location.search).get("tvsforcefetch")==="1";if(L&&!i){s("Har inline payload, skipper fetch.",L);return}if(!r){M("Mangler routeId \u2013 hverken inline payload eller data-route-id.");return}(async()=>{try{s("Henter rute via REST:",r," (tvsslow:",l1,"ms)"),c("loading"),l1&&await V1(l1);let Z=await(await fetch(`/wp-json/tvs/v1/routes/${encodeURIComponent(r)}`,{credentials:"same-origin"})).json();s("REST OK:",Z),l(Z),c("ok")}catch(V){P("REST FAIL:",V),M("Kunne ikke hente rutedata."),A(V?.message||String(V)),c("error")}})()},[r]),e(()=>{if(!L)return;let i=i1.current;if(!i)return;let V=null,Z=!1;function x(){return new Promise((u,a1)=>{if(window.Vimeo&&window.Vimeo.Player)return u();let _=document.querySelector('script[src="https://player.vimeo.com/api/player.js"]');if(_){_.addEventListener("load",()=>u()),_.addEventListener("error",()=>a1(new Error("Vimeo API failed to load")));return}let p=document.createElement("script");p.src="https://player.vimeo.com/api/player.js",p.async=!0,p.onload=()=>u(),p.onerror=()=>a1(new Error("Vimeo API failed to load")),document.head.appendChild(p)})}return(async()=>{try{if(await x(),Z)return;V=new window.Vimeo.Player(i),M1.current=V,s("Vimeo Player constructed"),V.getDuration().catch(()=>{});try{await V.ready(),Z||(w(!0),s("Vimeo Player ready"))}catch(u){P("Vimeo ready() rejected:",u)}V.on("timeupdate",u=>{typeof u?.seconds=="number"&&h(u.seconds)})}catch{P("Vimeo API init failed")}})(),()=>{Z=!0;try{V&&V.off&&V.off("timeupdate"),V&&V.destroy&&V.destroy()}catch{}M1.current=null,w(!1)}},[L]),e(()=>{async function i(Z){if((Z.key==="f"||Z.key==="F")&&Z.target.tagName!=="INPUT"&&Z.target.tagName!=="TEXTAREA"){Z.preventDefault();let x=!v;if(x&&!f){b("Please wait for video to load","warning");return}if(E(x),x){await V1(100);try{let u=document.querySelector(".tvs-app");u&&u.requestFullscreen&&await u.requestFullscreen()}catch(u){console.warn("Fullscreen not supported or denied:",u)}}else if(document.fullscreenElement)try{await document.exitFullscreen()}catch(u){console.warn("Error exiting fullscreen:",u)}}if(Z.key==="Escape"&&v&&(E(!1),document.fullscreenElement))try{await document.exitFullscreen()}catch(x){console.warn("Error exiting fullscreen:",x)}}function V(){!document.fullscreenElement&&v&&E(!1)}return window.addEventListener("keydown",i),document.addEventListener("fullscreenchange",V),()=>{window.removeEventListener("keydown",i),document.removeEventListener("fullscreenchange",V)}},[v,f]);async function e1(i=8e3){let V=Date.now();for(;Date.now()-V<i;){let Z=M1.current;if(Z)try{return await Z.ready(),w(!0),Z}catch{}await V1(100)}throw new Error("Video player is not ready")}function w1(i){let V=L?.meta||{},Z=Number(V.duration_s||0),x=Number(V.distance_m||0);if(Z>0&&x>0&&i>=0){let u=Math.min(1,i/Z);return Math.round(x*u)}return 0}async function u1(){try{U(!0),s("Start clicked");let i=await e1();c("starting");try{await p1(i.play(),4e3,"play()"),s("Playback started")}catch(V){throw P("play() failed:",V),b("Could not start playback: "+(V?.message||String(V)),"error"),V}try{let V=await p1(i.getCurrentTime(),1500,"getCurrentTime");typeof V=="number"&&V>.5?(await V1(150),await p1(i.setCurrentTime(0),2e3,"setCurrentTime(0)"),s("Seeked to 0")):s("Already at start, skipping seek")}catch(V){s("Post-play seek skipped:",V?.message||String(V))}j(new Date),z(!0),c("running"),b("Activity started")}catch(i){P("Start session failed:",i),b("Player not ready yet. Please wait a moment and try again.","error"),c("error")}finally{U(!1)}}async function R1(){try{U(!0),s("Resume clicked");let i=await e1();c("starting");try{await i.play(),s("Playback resumed")}catch(V){throw P("resume play() failed:",V),b("Could not resume playback: "+(V?.message||String(V)),"error"),V}z(!0),c("running"),b("Activity resumed")}catch(i){P("Resume session failed:",i),b("Player not ready yet. Please wait a moment and try again.","error"),c("error")}finally{U(!1)}}async function B1(){try{s("Pause clicked");let i=await e1();try{await i.pause(),s("Playback paused")}catch(V){throw P("pause() failed:",V),b("Failed to pause: "+(V?.message||String(V)),"error"),V}z(!1),c("paused"),b("Activity paused")}catch(i){P("[TVS] Pause failed:",i),c("error")}}async function d1(){try{U(!0),s("Finish clicked");let i=await e1();c("saving");try{await i.pause(),s("Playback paused before save")}catch(g1){P("pause before save failed:",g1)}let V=await i.getCurrentTime(),Z=Math.max(0,Math.floor(V||0)),x=W?W.toISOString():new Date(Date.now()-Z*1e3).toISOString(),u=new Date(new Date(x).getTime()+Z*1e3).toISOString(),a1=w1(Z),_={route_id:L.id,route_name:L.title||"Unknown Route",activity_date:new Date().toISOString(),started_at:x,ended_at:u,duration_s:Z,distance_m:a1,visibility:"private"},p=window.TVS_SETTINGS?.nonce||"";l1&&await V1(l1);let X=await fetch("/wp-json/tvs/v1/activities",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":p},credentials:"same-origin",body:JSON.stringify(_)});if(!X.ok){let g1=await X.json();throw new Error(g1.message||`HTTP ${X.status}`)}await X.json(),b("Activity saved!"),c("ok"),z(!1),j(null),window.dispatchEvent(new CustomEvent("tvs:activity-updated"))}catch(i){P("[TVS] Save activity failed:",i),b("Failed to save activity: "+(i?.message||String(i)),"error"),A(i?.message||String(i)),c("error")}finally{U(!1)}}async function F1(i){try{Y(i),c("uploading");let V=await fetch(`/wp-json/tvs/v1/activities/${i}/strava`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.TVS_SETTINGS?.nonce||""},credentials:"same-origin"}),Z=await V.json();if(!V.ok)throw new Error(Z.message||"Upload failed");b("Uploaded to Strava!"),c("ok"),window.dispatchEvent(new CustomEvent("tvs:activity-updated"))}catch(V){P("Strava upload FAIL:",V),b("Failed to upload to Strava: "+(V?.message||String(V)),"error"),A(V?.message||String(V)),c("error")}finally{Y(null)}}if(n)return C("div",{className:"tvs-route tvs-error"},String(n));if(!L)return O.createElement(_1,null);let R=L.title||"Route",g=L.meta||{},d=g.vimeo_id?String(g.vimeo_id):"",r1=g.gpx_url||"",B=Number(g.duration_s||0),K=!!window.TVS_SETTINGS?.user;if(!d&&r1)return C(G1,{routeData:L,routeId:r});if(!d&&!r1)return C("div",{className:"tvs-route tvs-fallback"},C("p",null,"This route has no video or GPX data available."));let k=K?G?[C("button",{key:"pause",className:"tvs-btn tvs-btn--warning",onClick:B1,disabled:F||!f,"aria-label":"Pause activity",title:"Pause activity"},C(x2,{"aria-hidden":!0}),C("span",{className:"tvs-btn__label"},"PAUSE")),C("button",{key:"finish",className:"tvs-btn tvs-btn--success",onClick:d1,disabled:F||!f,"aria-label":"Finish and save activity",title:"Finish and save activity"},F?[C("span",{className:"tvs-spinner","aria-hidden":"true"}),C("span",{className:"tvs-btn__label"},"SAVE")]:[C(N1,{"aria-hidden":!0}),C("span",{className:"tvs-btn__label"},"SAVE")])]:D>0&&W&&(B===0||D<B-.5)?[C("button",{key:"resume",className:"tvs-btn tvs-btn--primary",onClick:R1,disabled:F||!f,"aria-label":"Resume activity",title:"Resume activity"},F?[C("span",{className:"tvs-spinner","aria-hidden":"true"}),C("span",{className:"tvs-btn__label"},"RESUME")]:[C(I1,{"aria-hidden":!0}),C("span",{className:"tvs-btn__label"},"RESUME")]),C("button",{key:"finish",className:"tvs-btn tvs-btn--success",onClick:d1,disabled:F||!f,"aria-label":"Finish and save activity",title:"Finish and save activity"},F?[C("span",{className:"tvs-spinner","aria-hidden":"true"}),C("span",{className:"tvs-btn__label"},"SAVE")]:[C(N1,{"aria-hidden":!0}),C("span",{className:"tvs-btn__label"},"SAVE")]),C("button",{key:"restart",className:"tvs-btn tvs-btn--outline",onClick:u1,disabled:F||!f,"aria-label":"Restart from beginning",title:"Restart from beginning"},F?[C("span",{className:"tvs-spinner","aria-hidden":"true"}),C("span",{className:"tvs-btn__label"},"BEGINNING")]:[C(s1,{"aria-hidden":!0}),C("span",{className:"tvs-btn__label"},"BEGINNING")])]:C("button",{className:"tvs-btn tvs-btn--primary",onClick:u1,disabled:F||!f,"aria-label":"Start activity",title:"Start activity"},F?[C("span",{className:"tvs-spinner","aria-hidden":"true"}),C("span",{className:"tvs-btn__label"},"START")]:[C(I1,{"aria-hidden":!0}),C("span",{className:"tvs-btn__label"},"START")]):C("div",{className:"tvs-alert tvs-alert--warning"},C("div",{className:"tvs-row tvs-mb-2"},C("span",{className:"tvs-badge tvs-badge-warning"},"Warning"),C("strong",null," You must be logged in")),C("p",null,"Please ",C("a",{href:"/login"},"log in")," to create activities and upload to Strava. Don't have an account? ",C("a",{href:"/register"},"Register here"),"."));return C("div",{className:`tvs-app${v?" tvs-app--cinematic":""}`},C("div",{key:"video-container",className:v?"tvs-video-container":"tvs-panel tvs-app__container"},d?C("div",{className:v?"tvs-video tvs-video--cinematic":"tvs-video"},C("iframe",{ref:i1,width:560,height:315,src:"https://player.vimeo.com/video/"+encodeURIComponent(d)+"?controls=0&title=0&byline=0&portrait=0&pip=0&playsinline=1&dnt=1&transparent=0&muted=0",frameBorder:0,allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})):null,v&&N&&C("div",{key:"minimap",className:"tvs-video-overlay tvs-video-overlay--minimap"},C("div",{className:"tvs-overlay-placeholder"},"Mini-map")),v&&m&&C("div",{key:"routeinfo",className:"tvs-video-overlay tvs-video-overlay--routeinfo"},C("div",{className:"tvs-overlay-placeholder"},"Route Info")),!v&&C(S1,{React:O,currentTime:D,duration:B}),!v&&(new URLSearchParams(location.search).get("tvsdebug")==="1"||window.TVS_DEBUG===!0||localStorage.getItem("tvsDev")==="1")?C("div",{className:"tvs-meta"},C("pre",null,JSON.stringify(g,null,2))):null,!v&&C("div",{className:"tvs-btns"},k,C("button",{className:"tvs-btn tvs-btn--outline tvs-cinematic-toggle",onClick:async()=>{if(!f){b("Please wait for video to load","warning");return}E(!0);try{let i=document.querySelector(".tvs-app");i&&i.requestFullscreen&&await i.requestFullscreen()}catch(i){console.warn("Fullscreen not supported or denied:",i)}},"aria-label":"Enter cinematic mode",title:"Enter cinematic mode (F)",disabled:!f},C(f1,{"aria-hidden":!0})))),v?C("div",{className:`tvs-control-panel${$?"":" tvs-control-panel--hidden"}`,style:B>0?{"--progress":`${Math.min(D/B*100,100)}%`}:void 0},C("button",{className:"tvs-control-panel-tab",onClick:()=>c1(i=>!i),"aria-label":$?"Hide controls":"Show controls",title:$?"Hide controls":"Show controls"},C($?o2:M2,{"aria-hidden":!0})),C("div",{className:"tvs-control-panel-content"},C("div",{className:"tvs-btns"},k),C("div",{className:"tvs-cinematic-controls"},C("button",{className:"tvs-btn tvs-btn--outline",onClick:()=>I(i=>!i),"aria-label":N?"Hide minimap":"Show minimap",title:N?"Hide minimap":"Show minimap"},C(Z2,{"aria-hidden":!0})),C("button",{className:"tvs-btn tvs-btn--outline",onClick:()=>C1(i=>!i),"aria-label":m?"Hide route info":"Show route info",title:m?"Hide route info":"Show route info"},C(g2,{"aria-hidden":!0})),C("button",{className:"tvs-btn tvs-btn--outline tvs-exit-cinematic",onClick:async()=>{if(E(!1),document.fullscreenElement)try{await document.exitFullscreen()}catch(i){console.warn("Error exiting fullscreen:",i)}},"aria-label":"Exit cinematic mode (press F or Escape)",title:"Exit cinematic mode (press F or Escape)"},C(l2,{"aria-hidden":!0}))))):null,H1?C(O1,{React:O,routeId:r,lastStatus:y,lastError:o1,currentTime:D,duration:B}):null)}H1||document.addEventListener("keydown",t=>{if(t.key==="`"){try{localStorage.setItem("tvsDev","1")}catch{}location.reload()}});function s2(){let t=document.getElementById("tvs-app-root");if(t){let r=window.tvs_route_payload||null,e=t.getAttribute("data-route-id")||r&&r.id;s("Boot \u2192 routeId:",e,"inline payload:",!!r),Q1(W1,{initialData:r,routeId:e},t)}}H1?s("Debug mode enabled."):document.addEventListener("keydown",function(t){if(t.key==="`"){let r=new URL(location.href);r.searchParams.set("tvsdebug","1"),location.href=r.toString()}});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s2):s2();})();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=tvs-app.js.map
